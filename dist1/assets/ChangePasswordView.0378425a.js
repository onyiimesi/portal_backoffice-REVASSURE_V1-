import{H as x}from"./Header.61007050.js";import{_ as y,a as u,u as C,o as a,c as n,b as s,t as i,d,w as N,F as c,k as p,e as w,l as k,n as _,v as h,f as l,h as V,r as g}from"./index.a5d27921.js";import{u as D,r as f,s as S}from"./index.esm.0e85bd27.js";const z={name:"changepassword",data(){return{v$:D(),errors:[],message:[],oldpassword:"",newpassword:"",confirmPassword:"",orgDetails:{id:"",emailAddress:"",subOrganisationCode:"",organizationCode:"",firstName:"",lastName:"",middleName:"",gender:"",unit:""},role:"",id:""}},validations(){return{newpassword:{required:f},confirmPassword:{required:f,sameAsPassword:S(this.newpassword)}}},async mounted(){this.role=localStorage.getItem("role"),this.id=localStorage.getItem("id");const r=await u.get("api/Users/profile",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.orgDetails=r.data.result},methods:{async changePass(){this.errors=[],this.message=[];const r=C();if(this.newpassword||r.error("Field required."),this.v$.$validate(),this.v$.$error)r.error("New password & Confirm password don't match.");else{const o=await u.put("api/UserAccount/changepassword",{accountid:this.id,oldpassword:this.oldpassword,newpassword:this.newpassword},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});o?(r.success(o.data.message),this.oldpassword="",this.newpassword="",this.confirmPassword=""):r.error("Incorrect Parameter")}}}},A={id:"layout-wrapper"},B={class:"main-content"},I={class:"page-content"},U={class:"container-fluid"},O={class:"row"},F={class:"col-12"},H={class:"page-title-box d-flex align-items-center justify-content-between"},T={class:"mb-0"},j=l("Change Password "),q=s("br",null,null,-1),M=l(),E={style:{"font-size":"14px","font-weight":"500"}},L=l(),G={style:{"font-size":"14px","font-weight":"500"}},J={class:"page-title-right"},K={class:"breadcrumb m-0"},Q={class:"breadcrumb-item"},R=l("Home"),W=s("li",{class:"breadcrumb-item active"},"Change Password",-1),X={class:"row justify-content-center"},Y={class:"col-md-12"},Z={class:"card"},$={class:"card-body table-responsive"},ss={key:0,class:"alert alert-danger"},es=s("b",null,"Please correct the following error(s):",-1),os={key:1,class:"alert alert-success"},ts={class:"row"},rs={class:"col-md-4"},as={class:"form-group"},ns=s("label",{class:"control-label"},[l("Old Password "),s("span",{class:"text-danger"},"*")],-1),is={class:"col-md-4"},ls={class:"form-group"},ds=s("label",{class:"control-label"},[l("New Password "),s("span",{class:"text-danger"},"*")],-1),cs={class:"col-md-4"},_s={class:"form-group"},hs=s("label",{class:"control-label"},[l("Confirm Password "),s("span",{class:"text-danger"},"*")],-1),ms=s("button",{class:"btn btn-outline-success mt-4"},"Change",-1),us=V('<footer class="footer"><div class="container-fluid"><div class="row"><div class="col-sm-6"> BackOffice 0.1 \xA9 2022 </div><div class="col-sm-6"><div class="text-sm-right d-none d-sm-block"> Powered by Intelligence </div></div></div></div></footer>',1);function ps(r,o,v,gs,e,m){const b=g("router-link"),P=g("router-view");return a(),n(c,null,[s("div",A,[s("div",B,[s("div",I,[s("div",U,[s("div",O,[s("div",F,[s("div",H,[s("h4",T,[j,q,M,s("span",E,i(e.orgDetails.organizationCode)+" // "+i(e.orgDetails.subOrganisationCode)+" //",1),L,s("span",G,i(e.orgDetails.lastName)+" "+i(e.orgDetails.firstName)+" // "+i(this.role),1)]),s("div",J,[s("ol",K,[s("li",Q,[d(b,{to:"/dashboard"},{default:N(()=>[R]),_:1})]),W])])])])]),s("div",X,[s("div",Y,[s("div",Z,[s("div",$,[e.errors.length?(a(),n("div",ss,[es,s("ul",null,[(a(!0),n(c,null,p(e.errors,t=>(a(),n("li",null,i(t),1))),256))])])):w("",!0),e.message.length?(a(),n("div",os,[(a(!0),n(c,null,p(e.message,t=>(a(),n("strong",null,i(t),1))),256))])):w("",!0),s("form",{onSubmit:o[3]||(o[3]=k((...t)=>m.changePass&&m.changePass(...t),["prevent"]))},[s("div",ts,[s("div",rs,[s("div",as,[ns,_(s("input",{class:"form-control",type:"password","onUpdate:modelValue":o[0]||(o[0]=t=>e.oldpassword=t)},null,512),[[h,e.oldpassword]])])]),s("div",is,[s("div",ls,[ds,_(s("input",{class:"form-control",type:"password","onUpdate:modelValue":o[1]||(o[1]=t=>e.newpassword=t)},null,512),[[h,e.newpassword]])])]),s("div",cs,[s("div",_s,[hs,_(s("input",{class:"form-control",type:"password","onUpdate:modelValue":o[2]||(o[2]=t=>e.confirmPassword=t)},null,512),[[h,e.confirmPassword]])])])]),ms],32)])])])])])]),us])]),d(P)],64)}var ws=y(z,[["render",ps]]);const Ps={__name:"ChangePasswordView",setup(r){return(o,v)=>(a(),n("main",null,[d(x),d(ws)]))}};export{Ps as default};
