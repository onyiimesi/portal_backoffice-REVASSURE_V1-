import{H as x}from"./Header.47845ea9.js";import{_ as y,a as h,o as t,c as r,b as s,t as n,d,w as C,F as c,j as u,e as m,k as P,l as p,v as g,f as l,g as k,r as w}from"./index.e2874b00.js";const N={name:"changepassword",data(){return{errors:[],message:[],oldpassword:"",newpassword:"",orgDetails:{id:"",emailAddress:"",subOrganisationCode:"",organizationCode:"",firstName:"",lastName:"",middleName:"",gender:"",unit:""},role:""}},async mounted(){this.role=localStorage.getItem("role");const i=await h.get("api/Users/profile",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.orgDetails=i.data.result},methods:{async changePass(){this.errors=[],this.message=[],this.newpassword||this.errors.push("Field required.");const i=await h.put("api/UserAccount/changepassword",{accountid:this.orgDetails.id,oldpassword:this.oldpassword,newpassword:this.newpassword},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});i?(this.message.push(i.data.message),this.oldpassword="",this.newpassword=""):this.errors.push("Incorrect Parameter")}}},D={id:"layout-wrapper"},V={class:"main-content"},z={class:"page-content"},B={class:"container-fluid"},S={class:"row"},I={class:"col-12"},A={class:"page-title-box d-flex align-items-center justify-content-between"},O={class:"mb-0"},U=l("Change Password "),j=s("br",null,null,-1),F=l(),H={style:{"font-size":"14px","font-weight":"500"}},M=l(),T={style:{"font-size":"14px","font-weight":"500"}},q={class:"page-title-right"},E={class:"breadcrumb m-0"},L={class:"breadcrumb-item"},G=l("Home"),J=s("li",{class:"breadcrumb-item active"},"Change Password",-1),K={class:"row justify-content-center"},Q={class:"col-md-12"},R={class:"card"},W={class:"card-body table-responsive"},X={key:0,class:"alert alert-danger"},Y=s("b",null,"Please correct the following error(s):",-1),Z={key:1,class:"alert alert-success"},$={class:"row"},ss={class:"col-md-6"},es={class:"form-group"},os=s("label",{class:"control-label"},[l("Old Password "),s("span",{class:"text-danger"},"*")],-1),ts={class:"col-md-6"},rs={class:"form-group"},as=s("label",{class:"control-label"},[l("New Password "),s("span",{class:"text-danger"},"*")],-1),ns=s("button",{class:"btn btn-outline-success mt-4"},"Change",-1),is=k('<footer class="footer"><div class="container-fluid"><div class="row"><div class="col-sm-6"> BackOffice 0.1 \xA9 2022 </div><div class="col-sm-6"><div class="text-sm-right d-none d-sm-block"> Powered by Intelligence </div></div></div></div></footer>',1);function ls(i,a,v,cs,e,_){const f=w("router-link"),b=w("router-view");return t(),r(c,null,[s("div",D,[s("div",V,[s("div",z,[s("div",B,[s("div",S,[s("div",I,[s("div",A,[s("h4",O,[U,j,F,s("span",H,n(e.orgDetails.organizationCode)+" // "+n(e.orgDetails.subOrganisationCode)+" //",1),M,s("span",T,n(e.orgDetails.lastName)+" "+n(e.orgDetails.firstName)+" // "+n(this.role),1)]),s("div",q,[s("ol",E,[s("li",L,[d(f,{to:"/dashboard"},{default:C(()=>[G]),_:1})]),J])])])])]),s("div",K,[s("div",Q,[s("div",R,[s("div",W,[e.errors.length?(t(),r("div",X,[Y,s("ul",null,[(t(!0),r(c,null,u(e.errors,o=>(t(),r("li",null,n(o),1))),256))])])):m("",!0),e.message.length?(t(),r("div",Z,[(t(!0),r(c,null,u(e.message,o=>(t(),r("strong",null,n(o),1))),256))])):m("",!0),s("form",{onSubmit:a[2]||(a[2]=P((...o)=>_.changePass&&_.changePass(...o),["prevent"]))},[s("div",$,[s("div",ss,[s("div",es,[os,p(s("input",{class:"form-control",type:"password","onUpdate:modelValue":a[0]||(a[0]=o=>e.oldpassword=o)},null,512),[[g,e.oldpassword]])])]),s("div",ts,[s("div",rs,[as,p(s("input",{class:"form-control",type:"password","onUpdate:modelValue":a[1]||(a[1]=o=>e.newpassword=o)},null,512),[[g,e.newpassword]])])])]),ns],32)])])])])])]),is])]),d(b)],64)}var ds=y(N,[["render",ls]]);const us={__name:"ChangePasswordView",setup(i){return(a,v)=>(t(),r("main",null,[d(x),d(ds)]))}};export{us as default};
