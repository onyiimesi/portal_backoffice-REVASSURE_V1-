import{H as N}from"./Header.61007050.js";import{_ as y,a as m,o as r,c as a,b as e,t as l,d as i,w as _,l as x,n as c,v as d,e as p,F as b,k as g,f as u,h as k,r as f}from"./index.a5d27921.js";const V={data(){return{search:"",allcustomer:[],showsearch:!1,caris:[],customerDetails:{emailAddress:"",subOrganisationCode:"",organizationCode:"",firstName:"",lastName:"",middleName:"",gender:"",unit:""},code:"",name:"",email:"",phone:"",role:"",roles:"billing-oficer"}},async mounted(){this.role=localStorage.getItem("role"),this.roles!=this.role&&(localStorage.removeItem("token"),this.$router.push("/"));const n=await m.get("api/Users/profile",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.customerDetails=n.data.result;const o=await m.get("api/Customer/allcustomer",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allcustomer=o.data.result,setTimeout(()=>{$("#datatable").DataTable({lengthMenu:[[5,10,25,50,-1],[5,10,25,50,"All"]],pageLength:25,language:{searchPlaceholder:"Enter NIN, BVN or Full Name"},retrieve:!0})})},methods:{async searchCustomer(){await m.get("api/Customer/search?name="+this.name+"&code="+this.code+"&email="+this.email+"&phone="+this.phone,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(n=>{this.caris=n.data.result,setTimeout(()=>{$("#datatable1").DataTable({lengthMenu:[[5,10,25,50,-1],[5,10,25,50,"All"]],pageLength:25,language:{searchPlaceholder:"Enter NIN, BVN or Full Name"},retrieve:!0})}),this.search="",this.showsearch=!0}).catch(n=>{console.log(n)})}}},B={id:"layout-wrapper"},S={class:"main-content"},D={class:"page-content"},I={class:"container-fluid"},A={class:"row"},z={class:"col-12"},F={class:"page-title-box d-flex align-items-center justify-content-between"},T={class:"mb-0"},U=u("Create Bill "),E=e("br",null,null,-1),L=u(),M={style:{"font-size":"14px","font-weight":"500"}},P=u(),H={style:{"font-size":"14px","font-weight":"500"}},O={class:"page-title-right"},j={class:"breadcrumb m-0"},q={class:"breadcrumb-item"},G=u("Home"),J=e("li",{class:"breadcrumb-item active"},"Create Bill",-1),K={class:"row"},Q={class:"col-md-4"},R={class:"card"},W=e("h5",{class:"pt-3 pb-3 pl-3 pr-3"},"Customer Search",-1),X={class:"card-body table-responsive border-top"},Y={class:"mb-3"},Z={class:"mb-3"},ee={class:"mb-3"},te={class:"mb-3"},se=e("div",{class:"mb-3"},[e("button",{class:"btn btn-outline-success"},"Search")],-1),oe={class:"col-md-8"},le={key:0,class:"card"},re={class:"card-body table-responsive"},ae={id:"datatable1",class:"table table-bordered dt-responsive nowrap",style:{"border-collapse":"collapse","border-spacing":"0",width:"100%"}},ne=e("thead",null,[e("tr",null,[e("th",null,"Customer Number"),e("th",null,"Customer Name"),e("th",null,"Action")])],-1),ie={key:0,class:"text-center"},ce=e("td",{colspan:"7"},[e("h3",{style:{color:"red"}},"Customer Not Found!")],-1),de=[ce],ue=e("button",{class:"btn btn-outline-success mr-2"},"View",-1),he={key:1,class:"card"},me=e("h5",{class:"pt-3 pb-3 pl-3 pr-3"},"Search for a customer to create bill",-1),_e={class:"card-body table-responsive border-top"},pe={id:"datatable",class:"table table-bordered dt-responsive nowrap",style:{"border-collapse":"collapse","border-spacing":"0",width:"100%"}},be=e("thead",null,[e("tr",null,[e("th",null,"Customer Number"),e("th",null,"Customer Name"),e("th",null,"Action")])],-1),ve=e("button",{class:"btn btn-outline-success mr-2"},"View",-1),ge=k('<footer class="footer"><div class="container-fluid"><div class="row"><div class="col-sm-6"> BackOffice 0.1 \xA9 2022 </div><div class="col-sm-6"><div class="text-sm-right d-none d-sm-block"> Powered by Intelligence </div></div></div></div></footer>',1);function fe(n,o,w,Ce,s,v){const h=f("router-link"),C=f("router-view");return r(),a(b,null,[e("div",B,[e("div",S,[e("div",D,[e("div",I,[e("div",A,[e("div",z,[e("div",F,[e("h4",T,[U,E,L,e("span",M,l(s.customerDetails.organizationCode)+" // "+l(s.customerDetails.subOrganisationCode)+" //",1),P,e("span",H,l(s.customerDetails.lastName)+" "+l(s.customerDetails.firstName)+" // "+l(this.role),1)]),e("div",O,[e("ol",j,[e("li",q,[i(h,{to:"/dashboard"},{default:_(()=>[G]),_:1})]),J])])])])]),e("div",K,[e("div",Q,[e("div",R,[W,e("div",X,[e("form",{onSubmit:o[4]||(o[4]=x((...t)=>v.searchCustomer&&v.searchCustomer(...t),["prevent"]))},[e("div",Y,[c(e("input",{class:"form-control mr-3",type:"text","onUpdate:modelValue":o[0]||(o[0]=t=>s.code=t),placeholder:"Customer Code"},null,512),[[d,s.code]])]),e("div",Z,[c(e("input",{class:"form-control mr-3",type:"text",placeholder:"First Name or Last Name","onUpdate:modelValue":o[1]||(o[1]=t=>s.name=t)},null,512),[[d,s.name]])]),e("div",ee,[c(e("input",{class:"form-control mr-3",type:"email",placeholder:"Email Address","onUpdate:modelValue":o[2]||(o[2]=t=>s.email=t)},null,512),[[d,s.email]])]),e("div",te,[c(e("input",{class:"form-control mr-3",type:"text",placeholder:"Phone Number","onUpdate:modelValue":o[3]||(o[3]=t=>s.phone=t)},null,512),[[d,s.phone]])]),se],32)])])]),e("div",oe,[s.showsearch==!0?(r(),a("div",le,[e("div",re,[e("table",ae,[ne,e("tbody",null,[s.caris.length?p("",!0):(r(),a("tr",ie,de)),(r(!0),a(b,null,g(s.caris,t=>(r(),a("tr",{key:t.id},[e("td",null,l(t.customerCode),1),e("td",null,l(t.firstname)+" "+l(t.lastname),1),e("td",null,[i(h,{to:"/customer-details/"+t.customerCode},{default:_(()=>[ue]),_:2},1032,["to"])])]))),128))])])])])):p("",!0),s.showsearch==!1?(r(),a("div",he,[me,e("div",_e,[e("table",pe,[be,e("tbody",null,[(r(!0),a(b,null,g(s.caris,t=>(r(),a("tr",{key:t.id},[e("td",null,l(t.customerCode),1),e("td",null,l(t.firstname)+" "+l(t.lastname),1),e("td",null,[i(h,{to:"/customer-details/"+t.customerCode},{default:_(()=>[ve]),_:2},1032,["to"])])]))),128))])])])])):p("",!0)])])])]),ge])]),i(C)],64)}var we=y(V,[["render",fe]]);const xe={__name:"CreateInvoiceView",setup(n){return(o,w)=>(r(),a("main",null,[i(N),i(we)]))}};export{xe as default};
