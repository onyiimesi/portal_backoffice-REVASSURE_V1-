import{H as y}from"./Header.61007050.js";import{_ as w,a as h,o as a,c as r,b as e,t,d,w as i,l as x,n as u,v as m,e as _,F as b,k as v,f,h as k,r as g}from"./index.a5d27921.js";const S={data(){return{search:"",allcustomer:[],showsearch:!1,caris:[],role:"",customerDetails:{emailAddress:"",subOrganisationCode:"",organizationCode:"",firstName:"",lastName:"",middleName:"",gender:"",unit:""},code:"",name:"",email:"",phone:"",roles:"billing-oficer",roless:"revenue-officer"}},async mounted(){this.role=localStorage.getItem("role"),this.roles!=this.role&&this.roless!=this.role&&(localStorage.removeItem("token"),this.$router.push("/"));const c=await h.get("api/Users/profile",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.customerDetails=c.data.result;const l=await h.get("api/Customer/allcustomer",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allcustomer=l.data.result,setTimeout(()=>{$("#datatable").DataTable({lengthMenu:[[5,10,25,50,-1],[5,10,25,50,"All"]],pageLength:10,language:{searchPlaceholder:"Enter NIN, BVN or Full Name"},retrieve:!0})})},methods:{async searchCustomer(){await h.get("api/Customer/search?name="+this.name+"&code="+this.code+"&email="+this.email+"&phone="+this.phone,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(c=>{this.caris=c.data.result,$("#datatable1").dataTable().fnDestroy(),setTimeout(()=>{$("#datatable1").DataTable({lengthMenu:[[5,10,25,50,-1],[5,10,25,50,"All"]],pageLength:10,language:{searchPlaceholder:"Enter NIN, BVN or Full Name"},retrieve:!0})}),this.search="",this.showsearch=!0}).catch(c=>{console.log(c)})}}},V={id:"layout-wrapper"},A={class:"main-content"},D={class:"page-content"},B={class:"container-fluid"},I={class:"row"},L={class:"col-12"},z={class:"page-title-box d-flex align-items-center justify-content-between"},M={class:"mb-0"},P={style:{"font-size":"14px","font-weight":"500"}},T=f(),F={style:{"font-size":"14px","font-weight":"500"}},E={class:"page-title-right"},U={class:"breadcrumb m-0"},H={class:"breadcrumb-item"},O=f("Home"),j=e("li",{class:"breadcrumb-item active"},"Customer Search",-1),G={class:"row"},R={class:"col-md-4"},q={class:"card"},J=e("h5",{class:"pt-3 pb-3 pl-3 pr-3"},"Customer Search",-1),K={class:"card-body table-responsive border-top"},Q={class:"mb-3"},W={class:"mb-3"},X={class:"mb-3"},Y={class:"mb-3"},Z=e("div",{class:"mb-3"},[e("button",{class:"btn btn-outline-success"},"Search")],-1),ee={class:"col-md-8"},se={key:0,class:"card"},te={class:"card-body table-responsive"},oe={id:"datatable1",class:"table table-bordered dt-responsive nowrap",style:{"border-collapse":"collapse","border-spacing":"0",width:"100%"}},le=e("thead",null,[e("tr",null,[e("th",null,"Customer Number"),e("th",null,"Customer Name"),e("th",null,"Mobile Number"),e("th",null,"Action")])],-1),ae={key:0,class:"text-center"},re=e("td",{colspan:"7"},[e("h3",{style:{color:"red"}},"Customer Not Found!")],-1),ce=[re],de=e("button",{class:"btn btn-outline-success btn-sm mr-2"},"View",-1),ne={key:1,class:"card"},ie=e("h5",{class:"pt-3 pb-3 pl-3 pr-3"},"Recent Search",-1),ue={class:"card-body table-responsive border-top"},me={id:"datatable",class:"table table-bordered dt-responsive nowrap",style:{"border-collapse":"collapse","border-spacing":"0",width:"100%"}},he=e("thead",null,[e("tr",null,[e("th",null,"Customer Number"),e("th",null,"Customer Name"),e("th",null,"Action")])],-1),_e=e("button",{class:"btn btn-outline-success mr-2"},"View",-1),be=["id"],pe={class:"modal-dialog modal-dialog-centered modal-lg"},ve={class:"modal-content"},ge=e("div",{class:"modal-header"},[e("h5",{id:"myLargeModalLabel",class:"modal-title mt-0"},"Customer Information"),e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"\xD7")])],-1),fe={class:"modal-body"},Ce={class:"row"},Ne={class:"col-6 col-md-3 mb-4"},ye={class:"form-group"},we=e("label",{class:"control-label"},"Customer Code",-1),xe={class:"col-6 col-md-3 mb-4"},ke={class:"form-group"},Se=e("label",{class:"control-label"},"Customer Name",-1),Ve={class:"col-6 col-md-3 mb-4"},Ae={class:"form-group"},De=e("label",{class:"control-label"},"Email Address",-1),Be={class:"col-6 col-md-3 mb-4"},Ie={class:"form-group"},Le=e("label",{class:"control-label"},"Phone Number",-1),ze={class:"col-6 col-md-3 mb-4"},Me={class:"form-group"},Pe=e("label",{class:"control-label"},"Phone Number (2)",-1),Te={class:"col-6 col-md-3 mb-4"},Fe={class:"form-group"},Ee=e("label",{class:"control-label"},"Address",-1),Ue={class:"col-6 col-md-3 mb-4"},He={class:"form-group"},Oe=e("label",{class:"control-label"},"State",-1),je={class:"col-6 col-md-3 mb-4"},Ge={class:"form-group"},Re=e("label",{class:"control-label"},"LGA",-1),qe=e("hr",null,null,-1),Je=e("button",{type:"button",class:"btn btn-outline-success","data-dismiss":"modal"},"View Profile",-1),Ke=k('<footer class="footer"><div class="container-fluid"><div class="row"><div class="col-sm-6"> BackOffice 0.1 \xA9 2022 </div><div class="col-sm-6"><div class="text-sm-right d-none d-sm-block"> Powered by Intelligence </div></div></div></div></footer>',1);function Qe(c,l,C,Xe,o,p){const n=g("router-link"),N=g("router-view");return a(),r(b,null,[e("div",V,[e("div",A,[e("div",D,[e("div",B,[e("div",I,[e("div",L,[e("div",z,[e("h4",M,[e("span",P,t(o.customerDetails.organizationCode)+" // "+t(o.customerDetails.subOrganisationCode)+" //",1),T,e("span",F,t(o.customerDetails.lastName)+" "+t(o.customerDetails.firstName)+" // "+t(this.role),1)]),e("div",E,[e("ol",U,[e("li",H,[d(n,{to:"/dashboard"},{default:i(()=>[O]),_:1})]),j])])])])]),e("div",G,[e("div",R,[e("div",q,[J,e("div",K,[e("form",{onSubmit:l[4]||(l[4]=x((...s)=>p.searchCustomer&&p.searchCustomer(...s),["prevent"]))},[e("div",Q,[u(e("input",{class:"form-control mr-3",type:"text","onUpdate:modelValue":l[0]||(l[0]=s=>o.code=s),placeholder:"Customer Code"},null,512),[[m,o.code]])]),e("div",W,[u(e("input",{class:"form-control mr-3",type:"text",placeholder:"First Name or Last Name","onUpdate:modelValue":l[1]||(l[1]=s=>o.name=s)},null,512),[[m,o.name]])]),e("div",X,[u(e("input",{class:"form-control mr-3",type:"email",placeholder:"Email Address","onUpdate:modelValue":l[2]||(l[2]=s=>o.email=s)},null,512),[[m,o.email]])]),e("div",Y,[u(e("input",{class:"form-control mr-3",type:"text",placeholder:"Phone Number","onUpdate:modelValue":l[3]||(l[3]=s=>o.phone=s)},null,512),[[m,o.phone]])]),Z],32)])])]),e("div",ee,[o.showsearch==!0?(a(),r("div",se,[e("div",te,[e("table",oe,[le,e("tbody",null,[o.caris.length?_("",!0):(a(),r("tr",ae,ce)),(a(!0),r(b,null,v(o.caris,s=>(a(),r("tr",{key:s.id},[e("td",null,t(s.customerCode),1),e("td",null,t(s.firstname)+" "+t(s.lastname),1),e("td",null,t(s.mobileNumber1)+", "+t(s.mobileNumber2),1),e("td",null,[d(n,{to:"/customer-details/"+s.customerCode},{default:i(()=>[de]),_:2},1032,["to"])])]))),128))])])])])):_("",!0),o.showsearch==!1?(a(),r("div",ne,[ie,e("div",ue,[e("table",me,[he,e("tbody",null,[(a(!0),r(b,null,v(o.caris,s=>(a(),r("tr",{key:s.id},[e("td",null,t(s.customerCode),1),e("td",null,t(s.firstname)+" "+t(s.lastname),1),e("td",null,[d(n,{to:"/customer-details/"+s.customerCode},{default:i(()=>[_e]),_:2},1032,["to"])]),e("div",{class:"modal fade",id:"bs-example-modal-lg-"+s.customerCode,tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"},[e("div",pe,[e("div",ve,[ge,e("div",fe,[e("div",Ce,[e("div",Ne,[e("div",ye,[we,e("h5",null,t(s.customerCode),1)])]),e("div",xe,[e("div",ke,[Se,e("h5",null,t(s.firstname)+" "+t(s.lastname),1)])]),e("div",Ve,[e("div",Ae,[De,e("h5",null,t(s.emailAddress),1)])]),e("div",Be,[e("div",Ie,[Le,e("h5",null,t(s.mobileNumber1),1)])]),e("div",ze,[e("div",Me,[Pe,e("h5",null,t(s.mobileNumber2),1)])]),e("div",Te,[e("div",Fe,[Ee,e("h5",null,t(s.contactAddress),1)])]),e("div",Ue,[e("div",He,[Oe,e("h5",null,t(s.stateCode),1)])]),e("div",je,[e("div",Ge,[Re,e("h5",null,t(s.lgaCode),1)])])]),qe,d(n,{to:"/customer-details/"+s.customerCode},{default:i(()=>[Je]),_:2},1032,["to"])])])])],8,be)]))),128))])])])])):_("",!0)])])])]),Ke])]),d(N)],64)}var We=w(S,[["render",Qe]]);const $e={__name:"CustomerSearchView",setup(c){return(l,C)=>(a(),r("main",null,[d(y),d(We)]))}};export{$e as default};
