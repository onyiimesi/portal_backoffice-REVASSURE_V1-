import{H as N}from"./Header.47845ea9.js";import{_ as w,a as d,o as i,c as a,b as s,F as c,j as _,t as h,e as g,k as C,l,v as n,n as v,d as p,g as f,r as y}from"./index.e2874b00.js";const U={name:"edituser",data(){return{errors:[],message:[],allroles:[],allsub:[],emailAddress:"",subOrganisationCode:"",organizationCode:"",unit:"",firstName:"",lastName:"",middleName:"",gender:"",password:"",role:"",customerDetails:{id:"",emailAddress:"",subOrganisationCode:"",organizationCode:"",firstName:"",lastName:"",middleName:"",gender:"",unit:""}}},async mounted(){const r=await d.get("api/Users/profile",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.customerDetails=r.data.result;const o=await d.get("api/Item/organizations/"+this.customerDetails.organizationCode,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allitems=o.data.result;const m=await d.get("api/roles/allroles",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allroles=m.data.result},methods:{async onChange(r){const o=await d.get("api/SubOrganisation/suborganizations/"+r.target.value,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allsub=o.data.result},async handleUser(){this.errors=[],this.message=[];const r=await d.post("api/Users/adduser",{emailAddress:this.emailAddress,subOrganisationCode:this.customerDetails.subOrganisationCode,organizationCode:this.customerDetails.organizationCode,unit:this.unit,firstName:this.firstName,lastName:this.lastName,middleName:this.middleName,gender:this.gender,password:this.password,role:this.role},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});r?(this.message.push(r.data.message),this.emailAddress="",this.subOrganisationCode="",this.organizationCode="",this.unit="",this.firstName="",this.lastName="",this.middleName="",this.gender="",this.password="",this.role=""):this.errors.push("Incorrect Parameter")}}},z={id:"layout-wrapper"},V={class:"main-content"},k={class:"page-content"},x={class:"container-fluid"},A=f('<div class="row"><div class="col-12"><div class="page-title-box d-flex align-items-center justify-content-between"><h4 class="mb-0">Edit Users</h4><div class="page-title-right"><ol class="breadcrumb m-0"><li class="breadcrumb-item"><a href="javascript: void(0);">Back Office</a></li><li class="breadcrumb-item active">Edit Users</li></ol></div></div></div></div>',1),D={class:"row"},S={class:"col-lg-12"},B={class:"card"},O={class:"card-body"},I={key:0,class:"alert alert-danger"},E=s("b",null,"Please correct the following error(s):",-1),M={key:1,class:"alert alert-success"},F={class:"row"},P={class:"col-md-3"},j={class:"form-group"},H=s("label",{class:"control-label"},"Email Address",-1),L={class:"col-md-3"},G={class:"form-group"},R=s("label",{class:"control-label"},"Unit",-1),T={class:"col-md-3"},q={class:"form-group"},J=s("label",{class:"control-label"},"First Name",-1),K={class:"col-md-3"},Q={class:"form-group"},W=s("label",{class:"control-label"},"Last Name",-1),X={class:"col-md-3"},Y={class:"form-group"},Z=s("label",{class:"control-label"},"Middle Name",-1),$={class:"col-md-3"},ss={class:"form-group"},es=s("label",{class:"control-label"},"Gender",-1),os=s("option",null,"Choose",-1),ts=s("option",{value:"male"},"Male",-1),ls=s("option",{value:"female"},"Female",-1),is=[os,ts,ls],as={class:"col-md-3"},rs={class:"form-group"},ns=s("label",{class:"control-label"},"Password",-1),ds={class:"col-md-3"},cs={class:"form-group"},ms=s("label",{class:"control-label"},"Role",-1),us=s("option",null,"Choose",-1),_s=["value"],hs=s("button",{class:"btn btn-success mr-4 float-left"},"Save",-1),ps=f('<footer class="footer"><div class="container-fluid"><div class="row"><div class="col-sm-6"> BackOffice 0.1 \xA9 2022 </div><div class="col-sm-6"><div class="text-sm-right d-none d-sm-block"> Powered by Intelligence </div></div></div></div></footer>',1);function gs(r,o,m,fs,t,u){const b=y("router-view");return i(),a(c,null,[s("div",z,[s("div",V,[s("div",k,[s("div",x,[A,s("div",D,[s("div",S,[s("div",B,[s("div",O,[t.errors.length?(i(),a("div",I,[E,s("ul",null,[(i(!0),a(c,null,_(t.errors,e=>(i(),a("li",null,h(e),1))),256))])])):g("",!0),t.message.length?(i(),a("div",M,[(i(!0),a(c,null,_(t.message,e=>(i(),a("strong",null,h(e),1))),256))])):g("",!0),s("form",{onSubmit:o[11]||(o[11]=C((...e)=>u.handleUser&&u.handleUser(...e),["prevent"]))},[s("div",F,[s("div",P,[s("div",j,[H,l(s("input",{class:"form-control",type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>t.customerDetails.emailAddress=e)},null,512),[[n,t.customerDetails.emailAddress]])])]),s("div",null,[s("div",null,[l(s("input",{class:"form-control",type:"hidden","onUpdate:modelValue":o[1]||(o[1]=e=>t.customerDetails.organizationCode=e),readonly:"",onChange:o[2]||(o[2]=e=>u.onChange(e))},null,544),[[n,t.customerDetails.organizationCode]])])]),s("div",null,[s("div",null,[l(s("input",{class:"form-control",type:"hidden","onUpdate:modelValue":o[3]||(o[3]=e=>t.customerDetails.subOrganisationCode=e),readonly:""},null,512),[[n,t.customerDetails.subOrganisationCode]])])]),s("div",L,[s("div",G,[R,l(s("input",{class:"form-control",type:"text","onUpdate:modelValue":o[4]||(o[4]=e=>t.unit=e)},null,512),[[n,t.unit]])])]),s("div",T,[s("div",q,[J,l(s("input",{class:"form-control",type:"text","onUpdate:modelValue":o[5]||(o[5]=e=>t.firstName=e)},null,512),[[n,t.firstName]])])]),s("div",K,[s("div",Q,[W,l(s("input",{class:"form-control",type:"text","onUpdate:modelValue":o[6]||(o[6]=e=>t.lastName=e)},null,512),[[n,t.lastName]])])]),s("div",X,[s("div",Y,[Z,l(s("input",{class:"form-control",type:"text","onUpdate:modelValue":o[7]||(o[7]=e=>t.middleName=e)},null,512),[[n,t.middleName]])])]),s("div",$,[s("div",ss,[es,l(s("select",{"onUpdate:modelValue":o[8]||(o[8]=e=>t.gender=e),class:"form-control",id:""},is,512),[[v,t.gender]])])]),s("div",as,[s("div",rs,[ns,l(s("input",{class:"form-control",type:"password","onUpdate:modelValue":o[9]||(o[9]=e=>t.password=e)},null,512),[[n,t.password]])])]),s("div",ds,[s("div",cs,[ms,l(s("select",{"onUpdate:modelValue":o[10]||(o[10]=e=>t.role=e),class:"form-control",id:""},[us,(i(!0),a(c,null,_(t.allroles,e=>(i(),a("option",{key:e.rolCode,value:e.rolCode},h(e.rolName),9,_s))),128))],512),[[v,t.role]])])])]),hs],32)])])])])])]),ps])]),p(b)],64)}var vs=w(U,[["render",gs]]);const ws={__name:"EditUserView",setup(r){return(o,m)=>(i(),a("main",null,[p(N),p(vs)]))}};export{ws as default};
