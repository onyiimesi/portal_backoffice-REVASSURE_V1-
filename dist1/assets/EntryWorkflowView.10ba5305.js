import{H as f}from"./Header.47845ea9.js";import{_ as g,a as d,u as w,o as l,c as r,b as t,t as s,F as _,j as y,d as i,w as m,f as u,g as p,r as h}from"./index.e2874b00.js";const k={name:"approveworkflow",data(){return{errors:[],message:[],entry:[],customerDetails:{id:"",emailAddress:"",subOrganisationCode:"",organizationCode:"",firstName:"",lastName:"",middleName:"",gender:""},role:""}},async mounted(){this.role=localStorage.getItem("role");const e=await d.get("api/Users/profile",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.customerDetails=e.data.result;const a=await d.get("api/WorkFlowEntry/Entries",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.entry=a.data.result,setTimeout(()=>{$("#datatable").DataTable({lengthMenu:[[5,10,25,50,-1],[5,10,25,50,"All"]],pageLength:10})})},methods:{async approveWorkflow(){const e=w();if(this.item||e.error("Item required."),this.initiatorRole||e.error("Initiator Role required."),this.verifierRole||e.error("Verifier Role required."),!this.condition)e.error("Condition required.");else{const a=await d.post("api/WorkFlowApproval/AddItem",{item:this.item,organizationCode:this.customerDetails.organizationCode,initiatorRole:this.initiatorRole,verifierRole:this.verifierRole,condition:this.condition},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});a?(e.success(a.data.message),this.item="",this.initiatorRole="",this.verifierRole="",this.condition=""):e.error("Incorrect Parameter")}}}},x={id:"layout-wrapper"},E={class:"main-content"},I={class:"page-content"},C={class:"container-fluid"},V={class:"row"},D={class:"col-12"},R={class:"page-title-box d-flex align-items-center justify-content-between"},A={class:"mb-0"},N=u("Workflow Entry, "),B={style:{"font-size":"14px","font-weight":"500"}},F=p('<div class="page-title-right"><ol class="breadcrumb m-0"><li class="breadcrumb-item"><a href="javascript: void(0);">Back Office</a></li><li class="breadcrumb-item active">Workflow Entry</li></ol></div>',1),z={class:"row"},W={class:"col-lg-12"},L={class:"card"},S={class:"card-body table-responsive"},j={id:"datatable",class:"table table-bordered dt-responsive nowrap",style:{"border-collapse":"collapse","border-spacing":"0",width:"100%"}},q=t("thead",null,[t("tr",null,[t("th",null,"Entry Value"),t("th",null,"Comment"),t("th",null,"Action")])],-1),T=["data-target"],M=["id"],O={class:"modal-dialog modal-dialog-centered"},H={class:"modal-content"},P=t("div",{class:"modal-header"},[t("h5",{id:"myLargeModalLabel",class:"modal-title mt-0"},"View Entry"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),U={class:"modal-body"},G={class:"row"},J={class:"col-md-6 mb-4"},K={class:"form-group"},Q=t("label",{class:"control-label"},"Entry Value",-1),X={class:"col-md-6 mb-4"},Y={class:"form-group"},Z=t("label",{class:"control-label"},"Comment",-1),tt=t("hr",null,null,-1),et=t("button",{class:"btn btn-success float-left","data-dismiss":"modal"},"Approve",-1),ot=u(" \xA0 "),st=t("button",{class:"btn btn-danger float-right","data-dismiss":"modal"},"Reject",-1),at=p('<footer class="footer"><div class="container-fluid"><div class="row"><div class="col-sm-6"> BackOffice 0.1 \xA9 2022 </div><div class="col-sm-6"><div class="text-sm-right d-none d-sm-block"> Powered by Intelligence </div></div></div></div></footer>',1);function it(e,a,b,rt,n,nt){const c=h("router-link"),v=h("router-view");return l(),r(_,null,[t("div",x,[t("div",E,[t("div",I,[t("div",C,[t("div",V,[t("div",D,[t("div",R,[t("h4",A,[N,t("span",B,s(n.customerDetails.lastName)+" "+s(n.customerDetails.firstName)+" - "+s(this.role),1)]),F])])]),t("div",z,[t("div",W,[t("div",L,[t("div",S,[t("table",j,[q,t("tbody",null,[(l(!0),r(_,null,y(n.entry,o=>(l(),r("tr",null,[t("td",null,s(o.entryValue),1),t("td",null,s(o.initiatorComment),1),t("td",null,[t("button",{class:"btn btn-success mr-2","data-toggle":"modal","data-target":"#bs-example-modal-lg-"+o.workFlowEntryID},"View",8,T)]),t("div",{class:"modal fade",id:"bs-example-modal-lg-"+o.workFlowEntryID,tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"},[t("div",O,[t("div",H,[P,t("div",U,[t("div",G,[t("div",J,[t("div",K,[Q,t("h5",null,s(o.entryValue),1)])]),t("div",X,[t("div",Y,[Z,t("h5",null,s(o.initiatorComment),1)])])]),tt,i(c,{to:"/approve-entry/"+o.workFlowEntryID},{default:m(()=>[et]),_:2},1032,["to"]),ot,i(c,{to:"/reject-entry/"+o.workFlowEntryID},{default:m(()=>[st]),_:2},1032,["to"])])])])],8,M)]))),256))])])])])])])])]),at])]),i(v)],64)}var lt=g(k,[["render",it]]);const _t={__name:"EntryWorkflowView",setup(e){return(a,b)=>(l(),r("main",null,[i(f),i(lt)]))}};export{_t as default};
