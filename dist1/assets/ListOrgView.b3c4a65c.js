import{H as w}from"./Header.47845ea9.js";import{_ as C,a as b,o as e,c as a,b as t,t as s,d as r,w as c,l as y,n as z,F as u,j as h,e as g,f as _,g as O,r as m}from"./index.e2874b00.js";const N={name:"listorganization",data(){return{name:"",allorg:[],allorgs:[],search:"",showsearch:!1,showpar:!1,role:"",parentOrganizationCode:"",customerDetails:{emailAddress:"",subOrganisationCode:"",organizationCode:"",firstName:"",lastName:"",middleName:"",gender:"",unit:""}}},async mounted(){this.role=localStorage.getItem("role");const i=await b.get("api/Users/profile",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.customerDetails=i.data.result;const l=await b.get("api/Organisation/organizations",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allorg=l.data.result,this.showpar=!1,this.showsearch=!1,setTimeout(()=>{$("#datatable").DataTable({lengthMenu:[[5,10,25,50,-1],[5,10,25,50,"All"]],pageLength:10})})},methods:{async onChange(i){const l=await b.get("api/Organisation/organizations/"+i.target.value,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allorgs=l.data.result,this.showpar=!0,this.showsearch=!1}}},A={id:"layout-wrapper"},x={class:"main-content"},k={class:"page-content"},E={class:"container-fluid"},P={class:"row"},B={class:"col-12"},D={class:"page-title-box d-flex align-items-center justify-content-between"},L={class:"mb-0"},V=_("Organizations "),S=t("br",null,null,-1),W=_(),I={style:{"font-size":"14px","font-weight":"500"}},M=_(" // "),H={style:{"font-size":"14px","font-weight":"500"}},T={class:"page-title-right"},j={class:"breadcrumb m-0"},F={class:"breadcrumb-item"},G=_("Home"),U=t("li",{class:"breadcrumb-item active"},"Organizations",-1),q={class:"row"},J={class:"col-12"},K={class:"card"},Q={class:"card-body table-responsive"},R={class:"mb-4"},X={class:"row"},Y={class:"col-md-12"},Z={class:"mb-2 float-left"},tt=t("label",{for:""},"Choose Parent Organization",-1),ot=["value"],st={key:0,class:"mt-3 float-right"},et=t("button",{class:"btn btn-outline-success"},[t("i",{class:"fa fa-plus"}),_(" Create Organization")],-1),at={key:0},lt={class:"table table-bordered dt-responsive nowrap",style:{"border-collapse":"collapse","border-spacing":"0",width:"100%"}},nt=t("thead",null,[t("tr",null,[t("th",null,"Parent Code"),t("th",null,"Organization Code"),t("th",null,"Organization Name"),t("th",null,"Email Address"),t("th",null,"Phone Number"),t("th",null,"Address"),t("th",null,"Website"),t("th",null,"Action")])],-1),it=t("button",{class:"btn btn-outline-success mr-2","data-toggle":"modal","data-target":".bs-example-modal-center"},"Edit",-1),rt=t("a",{href:"/list-organization"},[t("button",{class:"btn btn-outline-success"},"Go Back")],-1),dt={key:1},ct={class:"table table-bordered dt-responsive nowrap",style:{"border-collapse":"collapse","border-spacing":"0",width:"100%"}},ut=t("thead",null,[t("tr",null,[t("th",null,"Parent Code"),t("th",null,"Organization Code"),t("th",null,"Organization Name"),t("th",null,"Email Address"),t("th",null,"Phone Number"),t("th",null,"Address"),t("th",null,"Website"),t("th",null,"Action")])],-1),_t=t("button",{class:"btn btn-outline-success mr-2"},"Edit",-1),ht=t("a",{href:"/list-organization"},[t("button",{class:"btn btn-outline-success"},"Go Back")],-1),gt={key:2},bt={id:"datatable",class:"table table-border-success table-bordered dt-responsive nowrap",style:{"border-collapse":"collapse","border-spacing":"0",width:"100%"}},mt=t("thead",null,[t("tr",null,[t("th",null,"Parent Code"),t("th",null,"Organization Code"),t("th",null,"Organization Name"),t("th",null,"Email Address"),t("th",null,"Action")])],-1),pt=t("div",null,null,-1),vt=["data-target"],ft=["id"],wt={class:"modal-dialog modal-dialog-centered modal-lg"},Ct={class:"modal-content"},yt=t("div",{class:"modal-header"},[t("h5",{id:"myLargeModalLabel",class:"modal-title mt-0"},"View Organization"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),zt={class:"modal-body"},Ot={class:"row"},Nt={class:"col-md-4 mb-4"},At={class:"form-group"},xt=t("label",{class:"control-label"},"Organisation Name",-1),kt={class:"col-md-4 mb-4"},Et={class:"form-group"},Pt=t("label",{class:"control-label"},"Email Address",-1),Bt={class:"col-md-4 mb-4"},Dt={class:"form-group"},Lt=t("label",{class:"control-label"},"Phone Number",-1),Vt={class:"col-md-4 mb-4"},St={class:"form-group"},Wt=t("label",{class:"control-label"},"Office Address",-1),It={class:"col-md-4 mb-4"},Mt={class:"form-group"},Ht=t("label",{class:"control-label"},"Website",-1),Tt=t("hr",null,null,-1),jt=t("button",{type:"button",class:"btn btn-outline-success","data-dismiss":"modal"},"Edit Organization",-1),Ft=O('<footer class="footer"><div class="container-fluid"><div class="row"><div class="col-sm-6"> BackOffice 0.1 \xA9 2022 </div><div class="col-sm-6"><div class="text-sm-right d-none d-sm-block"> Powered by Intelligence </div></div></div></div></footer>',1);function Gt(i,l,p,qt,n,v){const d=m("router-link"),f=m("router-view");return e(),a(u,null,[t("div",A,[t("div",x,[t("div",k,[t("div",E,[t("div",P,[t("div",B,[t("div",D,[t("h4",L,[V,S,W,t("span",I,s(n.customerDetails.organizationCode)+" // "+s(n.customerDetails.subOrganisationCode),1),M,t("span",H,s(n.customerDetails.lastName)+" "+s(n.customerDetails.firstName)+" // "+s(this.role),1)]),t("div",T,[t("ol",j,[t("li",F,[r(d,{to:"/dashboard"},{default:c(()=>[G]),_:1})]),U])])])])]),t("div",q,[t("div",J,[t("div",K,[t("div",Q,[t("div",R,[t("form",null,[t("div",X,[t("div",Y,[t("div",Z,[tt,y(t("select",{onChange:l[0]||(l[0]=o=>v.onChange(o)),"onUpdate:modelValue":l[1]||(l[1]=o=>i.organisationCode=o),class:"form-control",style:{width:"200px"}},[(e(!0),a(u,null,h(n.allorg,o=>(e(),a("option",{value:o.organisationCode},s(o.organisationCode),9,ot))),256))],544),[[z,i.organisationCode]])]),n.role==="0"||n.role==="portal-admin"?(e(),a("div",st,[r(d,{to:"/create-organization"},{default:c(()=>[et]),_:1})])):g("",!0)])])])]),this.showsearch==!0?(e(),a("div",at,[t("table",lt,[nt,t("tbody",null,[(e(!0),a(u,null,h(i.caris,o=>(e(),a("tr",null,[t("td",null,s(o.parentOrganisationCode),1),t("td",null,s(o.organisationCode),1),t("td",null,s(o.organisationName),1),t("td",null,s(o.organisationEmail),1),t("td",null,s(o.organisationPhoneNumber),1),t("td",null,s(o.organisationAddress),1),t("td",null,s(o.organisationWebsite),1),t("td",null,[r(d,{to:"/edit-org/"+o.organisationCode},{default:c(()=>[it]),_:2},1032,["to"])])]))),256))])]),rt])):g("",!0),this.showpar==!0&&this.showsearch==!1?(e(),a("div",dt,[t("table",ct,[ut,t("tbody",null,[(e(!0),a(u,null,h(n.allorgs,o=>(e(),a("tr",null,[t("td",null,s(o.parentOrganisationCode),1),t("td",null,s(o.organisationCode),1),t("td",null,s(o.organisationName),1),t("td",null,s(o.organisationEmail),1),t("td",null,s(o.organisationPhoneNumber),1),t("td",null,s(o.organisationAddress),1),t("td",null,s(o.organisationWebsite),1),t("td",null,[r(d,{to:"/edit-org/"+o.organisationCode},{default:c(()=>[_t]),_:2},1032,["to"])])]))),256))])]),ht])):g("",!0),this.showpar==!1?(e(),a("div",gt,[t("table",bt,[mt,t("tbody",null,[pt,(e(!0),a(u,null,h(n.allorg,o=>(e(),a("tr",null,[t("td",null,s(o.parentOrganisationCode),1),t("td",null,s(o.organisationCode),1),t("td",null,s(o.organisationName),1),t("td",null,s(o.organisationEmail),1),t("td",null,[t("button",{class:"btn btn-outline-success mr-2","data-toggle":"modal","data-target":"#bs-example-modal-lg-"+o.organisationCode},"View",8,vt)]),t("div",{class:"modal fade",id:"bs-example-modal-lg-"+o.organisationCode,tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"},[t("div",wt,[t("div",Ct,[yt,t("div",zt,[t("div",Ot,[t("div",Nt,[t("div",At,[xt,t("h5",null,s(o.organisationName),1)])]),t("div",kt,[t("div",Et,[Pt,t("h5",null,s(o.organisationEmail),1)])]),t("div",Bt,[t("div",Dt,[Lt,t("h5",null,s(o.organisationPhoneNumber),1)])]),t("div",Vt,[t("div",St,[Wt,t("h5",null,s(o.organisationAddress),1)])]),t("div",It,[t("div",Mt,[Ht,t("h5",null,s(o.organisationWebsite),1)])])]),Tt,r(d,{to:"/edit-org/"+o.organisationCode},{default:c(()=>[jt]),_:2},1032,["to"])])])])],8,ft)]))),256))])])])):g("",!0)])])])])])]),Ft])]),r(f)],64)}var Ut=C(N,[["render",Gt]]);const Qt={__name:"ListOrgView",setup(i){return(l,p)=>(e(),a("main",null,[r(w),r(Ut)]))}};export{Qt as default};
