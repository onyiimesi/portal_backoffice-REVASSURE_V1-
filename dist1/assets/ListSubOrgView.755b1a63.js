import{H as O}from"./Header.47845ea9.js";import{_ as f,a as u,o as a,c as i,b as t,t as e,d as n,w as c,F as h,j as g,e as r,f as _,g as w,r as m}from"./index.e2874b00.js";const y={name:"listsuborganization",data(){return{name:"",search:"",showsearch:!1,caris:[],role:"",subsearch:"",showsubsearch:!1,cariss:[],allorg:[],customerDetails:{emailAddress:"",subOrganisationCode:"",organizationCode:"",firstName:"",lastName:"",middleName:"",gender:"",unit:""}}},async mounted(){this.role=localStorage.getItem("role");const l=await u.get("api/Users/profile",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.customerDetails=l.data.result,this.role=localStorage.getItem("role");const b=await u.get("api/SubOrganisation/suborganizations/"+this.customerDetails.organizationCode,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allorg=b.data.result,setTimeout(()=>{$("#datatable").DataTable({lengthMenu:[[5,10,25,50,-1],[5,10,25,50,"All"]],pageLength:10})})},methods:{async searchOrg(){await u.get("api/SubOrganisation/suborganizations/"+this.search,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(l=>{this.caris=l.data.result,this.search="",this.showsearch=!0}).catch(l=>{console.log(l)})},async searchSubOrg(){await u.get("api/SubOrganisation/details/"+this.subsearch,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(l=>{this.cariss=l,this.subsearch="",this.showsubsearch=!0}).catch(l=>{console.log(l)})}}},C={id:"layout-wrapper"},z={class:"main-content"},S={class:"page-content"},k={class:"container-fluid"},N={class:"row"},x={class:"col-12"},A={class:"page-title-box d-flex align-items-center justify-content-between"},D={class:"mb-0"},B=_("Sub-Organizations "),L=t("br",null,null,-1),V=_(),I={style:{"font-size":"14px","font-weight":"500"}},E={style:{"font-size":"14px","font-weight":"500"}},H={class:"page-title-right"},M={class:"breadcrumb m-0"},P={class:"breadcrumb-item"},T=_("Home"),j=t("li",{class:"breadcrumb-item active"},"Sub-Organizations",-1),F={key:0,class:"row"},U={class:"col-12"},q={key:0,class:"card"},G={class:"card-body table-responsive"},J={id:"datatable",class:"table table-bordered dt-responsive nowrap",style:{"border-collapse":"collapse","border-spacing":"0",width:"100%"}},K=t("thead",null,[t("tr",null,[t("th",null,"Sub-Organization Code"),t("th",null,"Sub-Organization Name"),t("th",null,"Organization Code"),t("th",null,"Action")])],-1),Q=t("button",{class:"btn btn-success mr-2"},"Edit",-1),R=t("hr",null,null,-1),W={key:1,class:"card"},X={class:"card-body table-responsive"},Y={id:"datatable",class:"table table-bordered dt-responsive nowrap",style:{"border-collapse":"collapse","border-spacing":"0",width:"100%"}},Z=t("thead",null,[t("tr",null,[t("th",null,"Sub-Organization Code"),t("th",null,"Sub-Organization Name"),t("th",null,"Organization Code")])],-1),tt={key:1,class:"row"},st={class:"col-12"},et={key:0,class:"card"},ot={class:"card-body table-responsive"},at={id:"datatable",class:"table table-bordered dt-responsive nowrap",style:{"border-collapse":"collapse","border-spacing":"0",width:"100%"}},it=t("thead",null,[t("tr",null,[t("th",null,"Sub-Organization Code"),t("th",null,"Sub-Organization Name"),t("th",null,"Organization Code"),t("th",null,"Action")])],-1),lt=t("button",{class:"btn btn-outline-success mr-2"},"Edit",-1),nt={key:1,class:"card"},rt={class:"card-body table-responsive"},dt={key:0,class:"mb-4 text-right"},ct=t("i",{class:"fa fa-plus"},null,-1),ut=_(" Create Sub-Organization"),ht={id:"datatable",class:"table table-bordered dt-responsive nowrap",style:{"border-collapse":"collapse","border-spacing":"0",width:"100%"}},_t=t("thead",null,[t("tr",null,[t("th",null,"Sub-Organization Code"),t("th",null,"Sub-Organization Name"),t("th",null,"Action")])],-1),bt=["data-target"],gt=["id"],mt={class:"modal-dialog modal-dialog-centered"},pt={class:"modal-content"},vt=t("div",{class:"modal-header"},[t("h5",{id:"myLargeModalLabel",class:"modal-title mt-0"},"View Sub-Organization"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),Ot={class:"modal-body"},ft={class:"row"},wt={class:"col-md-6 mb-4"},yt={class:"form-group"},Ct=t("label",{class:"control-label"},"Sub-Organisation Code",-1),zt={class:"col-md-6 mb-4"},St={class:"form-group"},kt=t("label",{class:"control-label"},"Sub-Organisation Name",-1),Nt=t("hr",null,null,-1),xt=t("button",{class:"btn btn-outline-success","data-dismiss":"modal"},"Edit Sub-Organization",-1),At=w('<footer class="footer"><div class="container-fluid"><div class="row"><div class="col-sm-6"> BackOffice 0.1 \xA9 2022 </div><div class="col-sm-6"><div class="text-sm-right d-none d-sm-block"> Powered by Intelligence </div></div></div></div></footer>',1);function Dt(l,b,p,Lt,o,Vt){const d=m("router-link"),v=m("router-view");return a(),i(h,null,[t("div",C,[t("div",z,[t("div",S,[t("div",k,[t("div",N,[t("div",x,[t("div",A,[t("h4",D,[B,L,V,t("span",I,e(o.customerDetails.organizationCode)+" // "+e(o.customerDetails.subOrganisationCode)+" // ",1),t("span",E,e(o.customerDetails.lastName)+" "+e(o.customerDetails.firstName)+" // "+e(this.role),1)]),t("div",H,[t("ol",M,[t("li",P,[n(d,{to:"/dashboard"},{default:c(()=>[T]),_:1})]),j])])])])]),o.role==="PortalAdmin"||o.role==="0"?(a(),i("div",F,[t("div",U,[o.showsearch==!0?(a(),i("div",q,[t("div",G,[t("table",J,[K,t("tbody",null,[(a(!0),i(h,null,g(o.caris,s=>(a(),i("tr",{key:s.id},[t("td",null,e(s.subOrganisationCode),1),t("td",null,e(s.subOrganisationName),1),t("td",null,e(s.organisationCode),1),t("td",null,[n(d,{to:"/edit-org/"+s.id},{default:c(()=>[Q]),_:2},1032,["to"])])]))),128))])])])])):r("",!0),R,o.showsearch==!1?(a(),i("div",W,[t("div",X,[t("table",Y,[Z,t("tbody",null,[(a(!0),i(h,null,g(o.caris,s=>(a(),i("tr",{key:s.id},[t("td",null,e(s.subOrganisationCode),1),t("td",null,e(s.subOrganisationName),1),t("td",null,e(s.organisationCode),1)]))),128))])])])])):r("",!0)])])):r("",!0),o.role==="PortalAdmin"||o.role==="org-admin"||o.role==="0"?(a(),i("div",tt,[t("div",st,[o.showsubsearch==!0?(a(),i("div",et,[t("div",ot,[t("table",at,[it,t("tbody",null,[t("tr",null,[t("td",null,e(this.cariss.data.result.subOrganisationCode),1),t("td",null,e(this.cariss.data.result.subOrganisationName),1),t("td",null,e(this.cariss.data.result.organisationCode),1),t("td",null,[n(d,{to:"/edit-suborg/"+this.cariss.data.result.subOrganisationCode},{default:c(()=>[lt]),_:1},8,["to"])])])])])])])):r("",!0),o.showsubsearch==!1?(a(),i("div",nt,[t("div",rt,[o.role==="org-admin"?(a(),i("div",dt,[n(d,{class:"btn btn-outline-success",to:"/create-sub-organization"},{default:c(()=>[ct,ut]),_:1})])):r("",!0),t("table",ht,[_t,t("tbody",null,[(a(!0),i(h,null,g(o.allorg,s=>(a(),i("tr",{key:s.id},[t("td",null,e(s.subOrganisationCode),1),t("td",null,e(s.subOrganisationName),1),t("td",null,[t("button",{class:"btn btn-outline-success mr-2","data-toggle":"modal","data-target":"#bs-example-modal-lg-"+s.subOrganisationCode},"View",8,bt)]),t("div",{class:"modal fade",id:"bs-example-modal-lg-"+s.subOrganisationCode,tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"},[t("div",mt,[t("div",pt,[vt,t("div",Ot,[t("div",ft,[t("div",wt,[t("div",yt,[Ct,t("h5",null,e(s.subOrganisationCode),1)])]),t("div",zt,[t("div",St,[kt,t("h5",null,e(s.subOrganisationName),1)])])]),Nt,n(d,{to:"/edit-suborg/"+s.subOrganisationCode},{default:c(()=>[xt]),_:2},1032,["to"])])])])],8,gt)]))),128))])])])])):r("",!0)])])):r("",!0)])]),At])]),n(v)],64)}var Bt=f(y,[["render",Dt]]);const Ht={__name:"ListSubOrgView",setup(l){return(b,p)=>(a(),i("main",null,[n(O),n(Bt)]))}};export{Ht as default};
