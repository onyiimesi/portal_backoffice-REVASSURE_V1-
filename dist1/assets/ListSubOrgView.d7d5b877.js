import{H as y}from"./Header.747f91be.js";import{_ as C,a as u,o as l,c as n,b as s,k as h,l as b,v as _,F as g,j as v,e as d,t as a,d as c,w as p,f,r as O}from"./index.06a914a2.js";const k={name:"listsuborganization",data(){return{name:"",search:"",showsearch:!1,caris:[],role:null,subsearch:"",showsubsearch:!1,cariss:[],allorg:[],customerDetails:{emailAddress:"",subOrganisationCode:"",organizationCode:"",firstName:"",lastName:"",middleName:"",gender:"",unit:""}}},async mounted(){const i=await u.get("api/Users/profile",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.customerDetails=i.data.result,this.role=localStorage.getItem("role");const o=await u.get("api/SubOrganisation/suborganizations/"+this.customerDetails.organizationCode,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allorg=o.data.result},methods:{async searchOrg(){await u.get("api/SubOrganisation/suborganizations/"+this.search,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(i=>{this.caris=i.data.result,this.search="",this.showsearch=!0}).catch(i=>{console.log(i)})},async searchSubOrg(){await u.get("api/SubOrganisation/details/"+this.subsearch,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(i=>{this.cariss=i,this.subsearch="",this.showsubsearch=!0}).catch(i=>{console.log(i)})}}},x={id:"layout-wrapper"},A={class:"main-content"},N={class:"page-content"},V={class:"container-fluid"},z=f('<div class="row"><div class="col-12"><div class="page-title-box d-flex align-items-center justify-content-between"><h4 class="mb-0">View Sub-Organisations</h4><div class="page-title-right"><ol class="breadcrumb m-0"><li class="breadcrumb-item"><a href="javascript: void(0);">Back Office</a></li><li class="breadcrumb-item active">View Sub-Organisations</li></ol></div></div></div></div>',1),B={key:0,class:"row"},E={class:"col-12"},I={key:0,class:"card"},D={class:"card-body table-responsive"},U={class:"row"},j=s("div",{class:"col-md-6"},null,-1),L={class:"col-md-6"},P={class:"d-flex"},F=s("button",{class:"btn btn-success"},"Search",-1),H=s("hr",null,null,-1),M={id:"datatable",class:"table table-bordered dt-responsive nowrap",style:{"border-collapse":"collapse","border-spacing":"0",width:"100%"}},T=s("thead",null,[s("tr",null,[s("th",null,"Sub-Organisation Code"),s("th",null,"Sub-Organisation Name"),s("th",null,"Organisation Code"),s("th",null,"Action")])],-1),q=s("button",{class:"btn btn-success mr-2"},"Edit",-1),G=s("hr",null,null,-1),J={key:1,class:"card"},K={class:"card-body table-responsive"},Q={class:"row"},R=s("div",{class:"col-md-6"},null,-1),W={class:"col-md-6"},X={class:"d-flex"},Y=s("button",{class:"btn btn-success"},"Search",-1),Z=s("hr",null,null,-1),$={id:"datatable",class:"table table-bordered dt-responsive nowrap",style:{"border-collapse":"collapse","border-spacing":"0",width:"100%"}},ss=s("thead",null,[s("tr",null,[s("th",null,"Sub-Organisation Code"),s("th",null,"Sub-Organisation Name"),s("th",null,"Organisation Code")])],-1),ts={key:1,class:"row"},es={class:"col-12"},os={key:0,class:"card"},ls={class:"card-body table-responsive"},ns={class:"row"},as=s("div",{class:"col-md-6"},null,-1),is={class:"col-md-6"},rs={class:"d-flex"},ds=s("button",{class:"btn btn-success"},"Search",-1),cs=s("hr",null,null,-1),us={id:"datatable",class:"table table-bordered dt-responsive nowrap",style:{"border-collapse":"collapse","border-spacing":"0",width:"100%"}},hs=s("thead",null,[s("tr",null,[s("th",null,"Sub-Organisation Code"),s("th",null,"Sub-Organisation Name"),s("th",null,"Organisation Code"),s("th",null,"Action")])],-1),bs=s("button",{class:"btn btn-success mr-2"},"Edit",-1),_s=s("hr",null,null,-1),gs={key:1,class:"card"},ms={class:"card-body table-responsive"},vs={class:"row"},ps=s("div",{class:"col-md-6"},null,-1),Os={class:"col-md-6"},fs={class:"d-flex"},ws=s("button",{class:"btn btn-success"},"Search",-1),Ss=s("hr",null,null,-1),ys={id:"datatable",class:"table table-bordered dt-responsive nowrap",style:{"border-collapse":"collapse","border-spacing":"0",width:"100%"}},Cs=s("thead",null,[s("tr",null,[s("th",null,"Organisation Code"),s("th",null,"Sub-Organisation Code"),s("th",null,"Sub-Organisation Name"),s("th",null,"Action")])],-1),ks=s("button",{class:"btn btn-success mr-2"},"Edit",-1),xs=f('<footer class="footer"><div class="container-fluid"><div class="row"><div class="col-sm-6"> BackOffice 0.1 \xA9 2022 </div><div class="col-sm-6"><div class="text-sm-right d-none d-sm-block"> Powered by Intelligence </div></div></div></div></footer>',1);function As(i,o,w,Vs,e,r){const m=O("router-link"),S=O("router-view");return l(),n(g,null,[s("div",x,[s("div",A,[s("div",N,[s("div",V,[z,e.role==="PortalAdmin"||e.role==="0"?(l(),n("div",B,[s("div",E,[e.showsearch==!0?(l(),n("div",I,[s("div",D,[s("div",null,[s("form",{onSubmit:o[1]||(o[1]=h((...t)=>r.searchOrg&&r.searchOrg(...t),["prevent"]))},[s("div",U,[j,s("div",L,[s("div",P,[b(s("input",{class:"form-control mr-3",type:"text","onUpdate:modelValue":o[0]||(o[0]=t=>e.search=t),placeholder:"Enter Organisation Code"},null,512),[[_,e.search]]),F])])])],32)]),H,s("table",M,[T,s("tbody",null,[(l(!0),n(g,null,v(e.caris,t=>(l(),n("tr",{key:t.id},[s("td",null,a(t.subOrganisationCode),1),s("td",null,a(t.subOrganisation1),1),s("td",null,a(t.organisationCode),1),s("td",null,[c(m,{to:"/edit-org/"+t.id},{default:p(()=>[q]),_:2},1032,["to"])])]))),128))])])])])):d("",!0),G,e.showsearch==!1?(l(),n("div",J,[s("div",K,[s("div",null,[s("form",{onSubmit:o[3]||(o[3]=h((...t)=>r.searchOrg&&r.searchOrg(...t),["prevent"]))},[s("div",Q,[R,s("div",W,[s("div",X,[b(s("input",{class:"form-control mr-3",type:"text","onUpdate:modelValue":o[2]||(o[2]=t=>e.search=t),placeholder:"Enter Organisation Code"},null,512),[[_,e.search]]),Y])])])],32)]),Z,s("table",$,[ss,s("tbody",null,[(l(!0),n(g,null,v(e.caris,t=>(l(),n("tr",{key:t.id},[s("td",null,a(t.subOrganisationCode),1),s("td",null,a(t.subOrganisation1),1),s("td",null,a(t.organisationCode),1)]))),128))])])])])):d("",!0)])])):d("",!0),e.role==="PortalAdmin"||e.role==="OrgAdmin"||e.role==="0"?(l(),n("div",ts,[s("div",es,[e.showsubsearch==!0?(l(),n("div",os,[s("div",ls,[s("div",null,[s("form",{onSubmit:o[5]||(o[5]=h((...t)=>r.searchSubOrg&&r.searchSubOrg(...t),["prevent"]))},[s("div",ns,[as,s("div",is,[s("div",rs,[b(s("input",{class:"form-control mr-3",type:"text","onUpdate:modelValue":o[4]||(o[4]=t=>e.subsearch=t),placeholder:"Enter Sub-Organisation Code"},null,512),[[_,e.subsearch]]),ds])])])],32)]),cs,s("table",us,[hs,s("tbody",null,[s("tr",null,[s("td",null,a(this.cariss.data.result.subOrganisationCode),1),s("td",null,a(this.cariss.data.result.subOrganisation1),1),s("td",null,a(this.cariss.data.result.organisationCode),1),s("td",null,[c(m,{to:"/edit-suborg/"+this.cariss.data.result.id},{default:p(()=>[bs]),_:1},8,["to"])])])])])])])):d("",!0),_s,e.showsubsearch==!1?(l(),n("div",gs,[s("div",ms,[s("div",null,[s("form",{onSubmit:o[7]||(o[7]=h((...t)=>r.searchSubOrg&&r.searchSubOrg(...t),["prevent"]))},[s("div",vs,[ps,s("div",Os,[s("div",fs,[b(s("input",{class:"form-control mr-3",type:"text","onUpdate:modelValue":o[6]||(o[6]=t=>e.subsearch=t),placeholder:"Enter Sub-Organisation Code"},null,512),[[_,e.subsearch]]),ws])])])],32)]),Ss,s("table",ys,[Cs,s("tbody",null,[(l(!0),n(g,null,v(e.allorg,t=>(l(),n("tr",{key:t.id},[s("td",null,a(t.organisationCode),1),s("td",null,a(t.subOrganisationCode),1),s("td",null,a(t.subOrganisation1),1),s("td",null,[c(m,{to:"/edit-suborg/"+t.id},{default:p(()=>[ks]),_:2},1032,["to"])])]))),128))])])])])):d("",!0)])])):d("",!0)])]),xs])]),c(S)],64)}var Ns=C(k,[["render",As]]);const Es={__name:"ListSubOrgView",setup(i){return(o,w)=>(l(),n("main",null,[c(y),c(Ns)]))}};export{Es as default};
