import{H as D}from"./Header.747f91be.js";import{_ as C,a as c,o as l,c as i,b as e,F as m,j as u,e as p,k as N,l as r,v as n,n as v,t as d,d as h,f,r as w}from"./index.06a914a2.js";const y={name:"profile",data(){return{errors:[],message:[],allorg:[],allsub:[],customerDetails:{id:"",emailAddress:"",subOrganisationCode:"",organizationCode:"",firstName:"",lastName:"",middleName:"",gender:""}}},async mounted(){const a=await c.get("api/Users/profile",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.customerDetails=a.data.result;const t=await c.get("api/Organisation/organizations",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allorg=t.data.result},methods:{async onChange(a){const t=await c.get("api/SubOrganisation/suborganizations/"+a.target.value,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),_=await c.get("api/Item/organizations/"+a.target.value,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allsub=t.data.result,this.allitem=_.data.result},async editProfile(){const a=await c.put("api/Users/editprofile",{id:this.customerDetails.id,emailAddress:this.customerDetails.emailAddress,subOrganisationCode:this.customerDetails.subOrganisationCode,organizationCode:this.customerDetails.organizationCode,firstName:this.customerDetails.firstName,lastName:this.customerDetails.lastName,middleName:this.customerDetails.middleName,gender:this.customerDetails.gender},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});console.log(a),a?this.message.push(a.data.message):this.errors.push("Incorrect Parameter")}}},x={id:"layout-wrapper"},z={class:"main-content"},O={class:"page-content"},k={class:"container-fluid"},V=f('<div class="row"><div class="col-12"><div class="page-title-box d-flex align-items-center justify-content-between"><h4 class="mb-0">Profile</h4><div class="page-title-right"><ol class="breadcrumb m-0"><li class="breadcrumb-item"><a href="javascript: void(0);">Back Office</a></li><li class="breadcrumb-item active">Profile</li></ol></div></div></div></div>',1),A={class:"row"},P={class:"col-lg-12"},S={class:"card"},B={class:"card-body"},U={key:0,class:"alert alert-danger"},I=e("b",null,"Please correct the following error(s):",-1),M={key:1,class:"alert alert-success"},j={class:"row"},E={class:"col-md-6"},F={class:"form-group"},H=e("label",{class:"control-label"},"Email Address",-1),L={class:"col-md-6"},G={class:"form-group"},T=e("label",{class:"control-label"},"Organisation Code",-1),q=["value"],J={class:"row"},K={class:"col-md-6"},Q={class:"form-group"},R=e("label",{class:"control-label"},"Sub-Organisation Code",-1),W=["value"],X={class:"col-md-6"},Y={class:"form-group"},Z=e("label",{class:"control-label"},"First Name",-1),$={class:"row"},ee={class:"col-md-6"},se={class:"form-group"},te=e("label",{class:"control-label"},"Last Name",-1),oe={class:"col-md-6"},le={class:"form-group"},ie=e("label",{class:"control-label"},"Middle Name",-1),ae={class:"row"},re={class:"col-md-6"},ne={class:"form-group"},de=e("label",{class:"control-label"},"Gender",-1),ce=e("button",{class:"btn btn-success mr-4 float-left"},"Edit Profile",-1),me=f('<footer class="footer"><div class="container-fluid"><div class="row"><div class="col-sm-6"> BackOffice 0.1 \xA9 2022 </div><div class="col-sm-6"><div class="text-sm-right d-none d-sm-block"> Powered by Intelligence </div></div></div></div></footer>',1);function ue(a,t,_,ge,o,g){const b=w("router-view");return l(),i(m,null,[e("div",x,[e("div",z,[e("div",O,[e("div",k,[V,e("div",A,[e("div",P,[e("div",S,[e("div",B,[o.errors.length?(l(),i("div",U,[I,e("ul",null,[(l(!0),i(m,null,u(o.errors,s=>(l(),i("li",null,d(s),1))),256))])])):p("",!0),o.message.length?(l(),i("div",M,[(l(!0),i(m,null,u(o.message,s=>(l(),i("strong",null,d(s),1))),256))])):p("",!0),e("form",{onSubmit:t[9]||(t[9]=N((...s)=>g.editProfile&&g.editProfile(...s),["prevent"]))},[e("div",j,[r(e("input",{class:"form-control",readonly:"",type:"hidden","onUpdate:modelValue":t[0]||(t[0]=s=>o.customerDetails.id=s)},null,512),[[n,o.customerDetails.id]]),e("div",E,[e("div",F,[H,r(e("input",{class:"form-control",readonly:"",type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>o.customerDetails.emailAddress=s)},null,512),[[n,o.customerDetails.emailAddress]])])]),e("div",L,[e("div",G,[T,r(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.customerDetails.organizationCode=s),onChange:t[3]||(t[3]=s=>g.onChange(s)),class:"form-control"},[e("option",null,d(o.customerDetails.organizationCode),1),(l(!0),i(m,null,u(o.allorg,s=>(l(),i("option",{value:s.organisationCode},d(s.organisationCode),9,q))),256))],544),[[v,o.customerDetails.organizationCode]])])])]),e("div",J,[e("div",K,[e("div",Q,[R,r(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.customerDetails.subOrganisationCode=s),class:"form-control",id:""},[e("option",null,d(o.customerDetails.subOrganisationCode),1),(l(!0),i(m,null,u(o.allsub,s=>(l(),i("option",{value:s.subOrganisationCode},d(s.subOrganisationCode),9,W))),256))],512),[[v,o.customerDetails.subOrganisationCode]])])]),e("div",X,[e("div",Y,[Z,r(e("input",{class:"form-control",type:"text","onUpdate:modelValue":t[5]||(t[5]=s=>o.customerDetails.firstName=s)},null,512),[[n,o.customerDetails.firstName]])])])]),e("div",$,[e("div",ee,[e("div",se,[te,r(e("input",{class:"form-control",type:"text","onUpdate:modelValue":t[6]||(t[6]=s=>o.customerDetails.lastName=s)},null,512),[[n,o.customerDetails.lastName]])])]),e("div",oe,[e("div",le,[ie,r(e("input",{class:"form-control",type:"text","onUpdate:modelValue":t[7]||(t[7]=s=>o.customerDetails.middleName=s)},null,512),[[n,o.customerDetails.middleName]])])])]),e("div",ae,[e("div",re,[e("div",ne,[de,r(e("input",{class:"form-control",type:"text","onUpdate:modelValue":t[8]||(t[8]=s=>o.customerDetails.gender=s)},null,512),[[n,o.customerDetails.gender]])])])]),ce],32)])])])])])]),me])]),h(b)],64)}var _e=C(y,[["render",ue]]);const ve={__name:"ProfileView",setup(a){return(t,_)=>(l(),i("main",null,[h(D),h(_e)]))}};export{ve as default};
