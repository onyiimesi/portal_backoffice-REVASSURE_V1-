import{H as N}from"./Header.61007050.js";import{_ as y,a as d,u as w,o as a,c as n,b as e,t as c,d as m,w as x,F as h,k as p,e as f,l as z,n as i,v as r,f as u,h as C,r as v}from"./index.a5d27921.js";const k={name:"profile",data(){return{errors:[],message:[],allorg:[],allsub:[],customerDetails:{id:"",emailAddress:"",subOrganisationCode:"",organizationCode:"",firstName:"",lastName:"",middleName:"",gender:""},role:""}},async mounted(){this.role=localStorage.getItem("role");const l=await d.get("api/Users/profile",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.customerDetails=l.data.result;const s=await d.get("api/Organisation/organizations",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allorg=s.data.result},methods:{async onChange(l){const s=await d.get("api/SubOrganisation/suborganizations/"+l.target.value,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),_=await d.get("api/Item/organizations/"+l.target.value,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allsub=s.data.result,this.allitem=_.data.result},async editProfile(){const l=w(),s=await d.put("api/Users/editprofile",{id:this.customerDetails.id,emailAddress:this.customerDetails.emailAddress,subOrganisationCode:this.customerDetails.subOrganisationCode,organizationCode:this.customerDetails.organizationCode,firstName:this.customerDetails.firstName,lastName:this.customerDetails.lastName,middleName:this.customerDetails.middleName,gender:this.customerDetails.gender},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});s?l.success(s.data.message):l.error("Incorrect Parameter")}}},V={id:"layout-wrapper"},A={class:"main-content"},O={class:"page-content"},P={class:"container-fluid"},S={class:"row"},U={class:"col-12"},B={class:"page-title-box d-flex align-items-center justify-content-between"},I={class:"mb-0"},E=u("Profile "),F=e("br",null,null,-1),H=u(),M={style:{"font-size":"14px","font-weight":"500"}},T=u(),L={style:{"font-size":"14px","font-weight":"500"}},j={class:"page-title-right"},G={class:"breadcrumb m-0"},q={class:"breadcrumb-item"},J=u("Home"),K=e("li",{class:"breadcrumb-item active"},"Profile",-1),Q={class:"row"},R={class:"col-lg-12"},W={class:"card"},X={class:"card-body"},Y={key:0,class:"alert alert-danger"},Z=e("b",null,"Please correct the following error(s):",-1),$={key:1,class:"alert alert-success"},ee={class:"row"},se={class:"col-md-3"},te={class:"form-group"},oe=e("label",{class:"control-label"},"Organization",-1),le={class:"col-md-3"},ie={class:"form-group"},re=e("label",{class:"control-label"},"Sub-Organization",-1),ae={class:"col-md-3"},ne={class:"form-group"},ce=e("label",{class:"control-label"},"First Name",-1),de={class:"col-md-3"},me={class:"form-group"},ue=e("label",{class:"control-label"},"Last Name",-1),_e={class:"col-md-3"},he={class:"form-group"},ge=e("label",{class:"control-label"},"Middle Name",-1),pe={class:"col-md-3"},fe={class:"form-group"},ve=e("label",{class:"control-label"},"Email Address",-1),be={class:"col-md-3"},De={class:"form-group"},Ne=e("label",{class:"control-label"},"Gender",-1),ye=e("button",{class:"btn btn-success mr-4 float-left"},"Edit Profile",-1),we=C('<footer class="footer"><div class="container-fluid"><div class="row"><div class="col-sm-6"> BackOffice 0.1 \xA9 2022 </div><div class="col-sm-6"><div class="text-sm-right d-none d-sm-block"> Powered by Intelligence </div></div></div></div></footer>',1);function xe(l,s,_,Ce,t,g){const b=v("router-link"),D=v("router-view");return a(),n(h,null,[e("div",V,[e("div",A,[e("div",O,[e("div",P,[e("div",S,[e("div",U,[e("div",B,[e("h4",I,[E,F,H,e("span",M,c(t.customerDetails.organizationCode)+" // "+c(t.customerDetails.subOrganisationCode)+" //",1),T,e("span",L,c(t.customerDetails.lastName)+" "+c(t.customerDetails.firstName)+" // "+c(this.role),1)]),e("div",j,[e("ol",G,[e("li",q,[m(b,{to:"/dashboard"},{default:x(()=>[J]),_:1})]),K])])])])]),e("div",Q,[e("div",R,[e("div",W,[e("div",X,[t.errors.length?(a(),n("div",Y,[Z,e("ul",null,[(a(!0),n(h,null,p(t.errors,o=>(a(),n("li",null,c(o),1))),256))])])):f("",!0),t.message.length?(a(),n("div",$,[(a(!0),n(h,null,p(t.message,o=>(a(),n("strong",null,c(o),1))),256))])):f("",!0),e("form",{onSubmit:s[8]||(s[8]=z((...o)=>g.editProfile&&g.editProfile(...o),["prevent"]))},[e("div",ee,[i(e("input",{class:"form-control",readonly:"",type:"hidden","onUpdate:modelValue":s[0]||(s[0]=o=>t.customerDetails.id=o)},null,512),[[r,t.customerDetails.id]]),e("div",se,[e("div",te,[oe,i(e("input",{class:"form-control",readonly:"",type:"text","onUpdate:modelValue":s[1]||(s[1]=o=>t.customerDetails.organizationCode=o)},null,512),[[r,t.customerDetails.organizationCode]])])]),e("div",le,[e("div",ie,[re,i(e("input",{class:"form-control",readonly:"",type:"text","onUpdate:modelValue":s[2]||(s[2]=o=>t.customerDetails.subOrganisationCode=o)},null,512),[[r,t.customerDetails.subOrganisationCode]])])]),e("div",ae,[e("div",ne,[ce,i(e("input",{class:"form-control",type:"text","onUpdate:modelValue":s[3]||(s[3]=o=>t.customerDetails.firstName=o)},null,512),[[r,t.customerDetails.firstName]])])]),e("div",de,[e("div",me,[ue,i(e("input",{class:"form-control",type:"text","onUpdate:modelValue":s[4]||(s[4]=o=>t.customerDetails.lastName=o)},null,512),[[r,t.customerDetails.lastName]])])]),e("div",_e,[e("div",he,[ge,i(e("input",{class:"form-control",type:"text","onUpdate:modelValue":s[5]||(s[5]=o=>t.customerDetails.middleName=o)},null,512),[[r,t.customerDetails.middleName]])])]),e("div",pe,[e("div",fe,[ve,i(e("input",{class:"form-control",readonly:"",type:"text","onUpdate:modelValue":s[6]||(s[6]=o=>t.customerDetails.emailAddress=o)},null,512),[[r,t.customerDetails.emailAddress]])])]),e("div",be,[e("div",De,[Ne,i(e("input",{class:"form-control",type:"text","onUpdate:modelValue":s[7]||(s[7]=o=>t.customerDetails.gender=o)},null,512),[[r,t.customerDetails.gender]])])])]),ye],32)])])])])])]),we])]),m(D)],64)}var ze=y(k,[["render",xe]]);const Ae={__name:"ProfileView",setup(l){return(s,_)=>(a(),n("main",null,[m(N),m(ze)]))}};export{Ae as default};
