import{H as I}from"./Header.47845ea9.js";import{_ as w,a as d,o as a,c as i,b as e,t as s,d as c,w as _,k as y,l as C,v as x,F as m,j as p,e as b,f as r,g as S,r as v}from"./index.e2874b00.js";const k={name:"listsuborganization",data(){return{name:"",search:"",showsearch:!1,caris:[],role:"",subsearch:"",showsubsearch:!1,cariss:[],taxtypes:[],allitems:[],customerDetails:{emailAddress:"",subOrganisationCode:"",organizationCode:"",firstName:"",lastName:"",middleName:"",gender:"",unit:""}}},async mounted(){const o=await d.get("api/Users/profile",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.customerDetails=o.data.result,this.role=localStorage.getItem("role");const n=await d.get("api/Item/organizations/"+this.customerDetails.organizationCode,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allitems=n.data.result,setTimeout(()=>{$("#datatable").DataTable({lengthMenu:[[5,10,25,50,-1],[5,10,25,50,"All"]],pageLength:10,language:{searchPlaceholder:"Enter Item name"}})});const u=await d.get("api/Taxtype/alltaxtypes",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.taxtypes=u.data.result.taxValue},methods:{async searchItem(){await d.get("api/Item/search/"+this.search,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(o=>{this.caris=o.data.result,this.search="",this.showsearch=!0}).catch(o=>{console.log(o)})},async searchOrg(){await d.get("api/Item/organizations/"+this.subsearch,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(o=>{this.cariss=o.data.result,this.subsearch="",this.showsubsearch=!0}).catch(o=>{console.log(o)})}}},N={id:"layout-wrapper"},z={class:"main-content"},O={class:"page-content"},R={class:"container-fluid"},D={class:"row"},M={class:"col-12"},A={class:"page-title-box d-flex align-items-center justify-content-between"},B={class:"mb-0"},T=r("Search Items "),V=e("br",null,null,-1),F=r(),L={style:{"font-size":"14px","font-weight":"500"}},E=r(),P={style:{"font-size":"14px","font-weight":"500"}},G={class:"page-title-right"},H={class:"breadcrumb m-0"},j={class:"breadcrumb-item"},U=r("Home"),q=e("li",{class:"breadcrumb-item active"},"Search Items",-1),J={class:"row"},K={class:"col-12"},Q={key:0,class:"card"},W={class:"card-body table-responsive"},X={class:"row"},Y=e("div",{class:"col-md-6"},null,-1),Z={class:"col-md-6"},ee={class:"d-flex"},te=e("button",{class:"btn btn-outline-success"},"Search",-1),se=e("hr",null,null,-1),oe={id:"datatable",class:"table table-bordered dt-responsive nowrap",style:{"border-collapse":"collapse","border-spacing":"0",width:"100%"}},le=e("thead",null,[e("tr",null,[e("th",null,"Item Code"),e("th",null,"Item Org Code"),e("th",null,"Item Name"),e("th",null,"Remita Revenue"),e("th",null,"GIFMIS Ref Code"),e("th",null,"Price"),e("th",null,"Taxtype"),e("th",null,"Action")])],-1),ae=e("button",{class:"btn btn-outline-success mr-2"},"Edit",-1),ie={key:1,class:"card"},ne={class:"card-body table-responsive"},ce={key:0,class:"mb-4 text-right"},de=e("i",{class:"fa fa-plus"},null,-1),re=r(" Create Items"),he={id:"datatable",class:"table table-bordered dt-responsive nowrap",style:{"border-collapse":"collapse","border-spacing":"0",width:"100%"}},_e=e("thead",null,[e("tr",null,[e("th",null,"GIFMIS Item Code"),e("th",null,"Organization Item Code"),e("th",null,"Item Name"),e("th",null,"Price"),e("th",null,"Action")])],-1),ue=["data-target"],me=["id"],be={class:"modal-dialog modal-dialog-centered modal-lg"},ge={class:"modal-content"},pe=e("div",{class:"modal-header"},[e("h5",{id:"myLargeModalLabel",class:"modal-title mt-0"},"More Information"),e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"\xD7")])],-1),ve={class:"modal-body"},fe={class:"row"},Ie={class:"col-md-3 mb-4"},we={class:"form-group"},ye=e("label",{class:"control-label"},"GIFMIS Item Code",-1),Ce={class:"col-md-3 mb-4"},xe={class:"form-group"},Se=e("label",{class:"control-label"},"Organization Item Code",-1),ke={class:"col-md-3 mb-4"},Ne={class:"form-group"},ze=e("label",{class:"control-label"},"Item Name",-1),Oe={class:"col-md-3 mb-4"},Re={class:"form-group"},De=e("label",{class:"control-label"},"Price",-1),Me={class:"col-md-3 mb-4"},Ae={class:"form-group"},Be=e("label",{class:"control-label"},"GIFMIS Reference Code",-1),Te={class:"col-md-3 mb-4"},Ve={class:"form-group"},Fe=e("label",{class:"control-label"},"Remita Reference",-1),Le={class:"col-md-3 mb-4"},Ee={class:"form-group"},Pe=e("label",{class:"control-label"},"Tax",-1),Ge=e("hr",null,null,-1),He=e("button",{class:"btn btn-outline-success","data-dismiss":"modal"},"Edit Item",-1),je=S('<footer class="footer"><div class="container-fluid"><div class="row"><div class="col-sm-6"> BackOffice 0.1 \xA9 2022 </div><div class="col-sm-6"><div class="text-sm-right d-none d-sm-block"> Powered by Intelligence </div></div></div></div></footer>',1);function Ue(o,n,u,Je,l,g){const h=v("router-link"),f=v("router-view");return a(),i(m,null,[e("div",N,[e("div",z,[e("div",O,[e("div",R,[e("div",D,[e("div",M,[e("div",A,[e("h4",B,[T,V,F,e("span",L,s(l.customerDetails.organizationCode)+" // "+s(l.customerDetails.subOrganisationCode)+" //",1),E,e("span",P,s(l.customerDetails.lastName)+" "+s(l.customerDetails.firstName)+" // "+s(this.role),1)]),e("div",G,[e("ol",H,[e("li",j,[c(h,{to:"/dashboard"},{default:_(()=>[U]),_:1})]),q])])])])]),e("div",J,[e("div",K,[l.showsearch==!0?(a(),i("div",Q,[e("div",W,[e("div",null,[e("form",{onSubmit:n[1]||(n[1]=y((...t)=>g.searchItem&&g.searchItem(...t),["prevent"]))},[e("div",X,[Y,e("div",Z,[e("div",ee,[C(e("input",{class:"form-control mr-3",type:"text","onUpdate:modelValue":n[0]||(n[0]=t=>l.search=t),placeholder:"Enter Item name"},null,512),[[x,l.search]]),te])])])],32)]),se,e("table",oe,[le,e("tbody",null,[(a(!0),i(m,null,p(l.caris,t=>(a(),i("tr",{key:t.id},[e("td",null,s(t.itemCode),1),e("td",null,s(t.itemOrgCode),1),e("td",null,s(t.itemName),1),e("td",null,s(t.remitaRevenueReference),1),e("td",null,s(t.gifmisReferenceCode),1),e("td",null,s(t.price),1),e("td",null,s(t.taxType),1),e("td",null,[c(h,{to:"/edit-item/"+t.itemCode},{default:_(()=>[ae]),_:2},1032,["to"])])]))),128))])])])])):b("",!0),l.showsearch==!1?(a(),i("div",ie,[e("div",ne,[l.role==="revenue-officer"?(a(),i("div",ce,[c(h,{class:"btn btn-outline-success",to:"/create-items"},{default:_(()=>[de,re]),_:1})])):b("",!0),e("table",he,[_e,e("tbody",null,[(a(!0),i(m,null,p(l.allitems,t=>(a(),i("tr",null,[e("td",null,s(t.itemCode),1),e("td",null,s(t.itemOrgCode),1),e("td",null,s(t.itemName),1),e("td",null,s(t.price),1),e("td",null,[e("button",{class:"btn btn-outline-success mr-2","data-toggle":"modal","data-target":"#bs-example-modal-lg-"+t.itemOrgCode},"More Details",8,ue)]),e("div",{class:"modal fade",id:"bs-example-modal-lg-"+t.itemOrgCode,tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"},[e("div",be,[e("div",ge,[pe,e("div",ve,[e("div",fe,[e("div",Ie,[e("div",we,[ye,e("h5",null,s(t.itemCode),1)])]),e("div",Ce,[e("div",xe,[Se,e("h5",null,s(t.itemOrgCode),1)])]),e("div",ke,[e("div",Ne,[ze,e("h5",null,s(t.itemName),1)])]),e("div",Oe,[e("div",Re,[De,e("h5",null,s(t.price),1)])]),e("div",Me,[e("div",Ae,[Be,e("h5",null,s(t.gifmisReferenceCode),1)])]),e("div",Te,[e("div",Ve,[Fe,e("h5",null,s(t.remitaRevenueReference),1)])]),e("div",Le,[e("div",Ee,[Pe,e("h5",null,s(t.taxType),1)])])]),Ge,c(h,{to:"/edit-item/"+t.itemOrgCode},{default:_(()=>[He]),_:2},1032,["to"])])])])],8,me)]))),256))])])])])):b("",!0)])])])]),je])]),c(f)],64)}var qe=w(k,[["render",Ue]]);const We={__name:"SearchItemsView",setup(o){return(n,u)=>(a(),i("main",null,[c(I),c(qe)]))}};export{We as default};
