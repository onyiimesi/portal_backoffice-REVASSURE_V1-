import{H as y}from"./Header.61007050.js";import{_ as x,a as r,o as a,c as i,b as e,t as s,d as n,w as u,l as C,n as S,v as k,F as _,k as b,e as v,s as g,f as d,h as w,r as f}from"./index.a5d27921.js";const D={name:"listsuborganization",data(){return{name:"",search:"",showsearch:!1,caris:[],role:"",subsearch:"",showsubsearch:!1,cariss:[],taxtypes:[],allitems:[],customerDetails:{emailAddress:"",subOrganisationCode:"",organizationCode:"",firstName:"",lastName:"",middleName:"",gender:"",unit:""},loaderDiv:"",mainDiv:"d-none",roless:"revenue-officer"}},async mounted(){this.role=localStorage.getItem("role"),this.roless!=this.role&&(localStorage.removeItem("token"),this.$router.push("/"));const o=await r.get("api/Users/profile",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.customerDetails=o.data.result;const c=await r.get("api/Item/organizations/"+this.customerDetails.organizationCode,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allitems=c.data.result,this.loaderDiv="d-none",this.mainDiv="",setTimeout(()=>{$("#datatable").DataTable({lengthMenu:[[5,10,25,50,-1],[5,10,25,50,"All"]],pageLength:25,language:{searchPlaceholder:"Enter Item name",retrieve:!0}})});const m=await r.get("api/Taxtype/alltaxtypes",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.taxtypes=m.data.result.taxValue},methods:{async searchItem(){await r.get("api/Item/search/"+this.search,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(o=>{this.caris=o.data.result,this.search="",this.showsearch=!0}).catch(o=>{console.log(o)})},async searchOrg(){await r.get("api/Item/organizations/"+this.subsearch,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(o=>{this.cariss=o.data.result,this.subsearch="",this.showsubsearch=!0}).catch(o=>{console.log(o)})}}},z={id:"layout-wrapper"},N={class:"main-content"},A={class:"page-content"},B={class:"container-fluid"},O={class:"row"},V={class:"col-12"},T={class:"page-title-box d-flex align-items-center justify-content-between"},R={class:"mb-0"},E=d("Search Items "),M=e("br",null,null,-1),F=d(),P={style:{"font-size":"14px","font-weight":"500"}},H=d(),G={style:{"font-size":"14px","font-weight":"500"}},L={class:"page-title-right"},U={class:"breadcrumb m-0"},j={class:"breadcrumb-item"},q=d("Home"),J=e("li",{class:"breadcrumb-item active"},"Search Items",-1),K={class:"row"},Q={class:"col-12"},W={class:"card"},X={class:"card-body"},Y=e("h4",null,"Search Item",-1),Z=e("hr",null,null,-1),ee={class:"row"},te={class:"col-md-6"},se=e("button",{class:"btn btn-outline-success"},"Search",-1),oe={key:0,class:"card"},le={class:"card-body table-responsive"},ae={id:"datatable",class:"table table-bordered dt-responsive nowrap",style:{"border-collapse":"collapse","border-spacing":"0",width:"100%"}},ie=e("thead",null,[e("tr",null,[e("th",null,"Item Code"),e("th",null,"Item Org Code"),e("th",null,"Item Name"),e("th",null,"Remita Revenue"),e("th",null,"GIFMIS Ref Code"),e("th",null,"Price"),e("th",null,"Taxtype"),e("th",null,"Action")])],-1),ce=e("button",{class:"btn btn-outline-success mr-2"},"Edit",-1),ne={key:1,class:"card"},re={class:"card-body table-responsive"},de={key:0,class:"mb-4 text-right"},he=e("i",{class:"fa fa-plus"},null,-1),ue=d(" Create Items"),me=w('<div class="ph-item"><div class="ph-col-12"><div class="ph-row"><div class="ph-col-4"></div><div class="ph-col-8 empty"></div><div class="ph-col-6"></div><div class="ph-col-6 empty"></div><div class="ph-col-12"></div><div class="ph-col-12"></div><div class="ph-col-12"></div><div class="ph-col-12"></div></div><div class="ph-row"><div class="ph-col-4"></div><div class="ph-col-8 empty"></div><div class="ph-col-6"></div><div class="ph-col-6 empty"></div><div class="ph-col-12"></div><div class="ph-col-12"></div><div class="ph-col-12"></div><div class="ph-col-12"></div></div></div></div>',1),_e=[me],ve={id:"datatable",class:"table table-bordered dt-responsive nowrap",style:{"border-collapse":"collapse","border-spacing":"0",width:"100%"}},pe=e("thead",null,[e("tr",null,[e("th",null,"GIFMIS Item Code"),e("th",null,"Organization Item Code"),e("th",null,"Item Name"),e("th",null,"Price"),e("th",null,"Action")])],-1),be=e("button",{class:"btn btn-outline-success"},"Edit Item",-1),ge=w('<footer class="footer"><div class="container-fluid"><div class="row"><div class="col-sm-6"> BackOffice 0.1 \xA9 2022 </div><div class="col-sm-6"><div class="text-sm-right d-none d-sm-block"> Powered by Intelligence </div></div></div></div></footer>',1);function fe(o,c,m,Ie,l,p){const h=f("router-link"),I=f("router-view");return a(),i(_,null,[e("div",z,[e("div",N,[e("div",A,[e("div",B,[e("div",O,[e("div",V,[e("div",T,[e("h4",R,[E,M,F,e("span",P,s(l.customerDetails.organizationCode)+" // "+s(l.customerDetails.subOrganisationCode)+" //",1),H,e("span",G,s(l.customerDetails.lastName)+" "+s(l.customerDetails.firstName)+" // "+s(this.role),1)]),e("div",L,[e("ol",U,[e("li",j,[n(h,{to:"/dashboard"},{default:u(()=>[q]),_:1})]),J])])])])]),e("div",K,[e("div",Q,[e("div",W,[e("div",X,[e("div",null,[Y,Z,e("form",{onSubmit:c[1]||(c[1]=C((...t)=>p.searchItem&&p.searchItem(...t),["prevent"]))},[e("div",ee,[e("div",te,[S(e("input",{class:"form-control mb-3",type:"text","onUpdate:modelValue":c[0]||(c[0]=t=>l.search=t),placeholder:"Enter Item name"},null,512),[[k,l.search]]),se])])],32)])])]),l.showsearch==!0?(a(),i("div",oe,[e("div",le,[e("table",ae,[ie,e("tbody",null,[(a(!0),i(_,null,b(l.caris,t=>(a(),i("tr",{key:t.id},[e("td",null,s(t.itemCode),1),e("td",null,s(t.itemOrgCode),1),e("td",null,s(t.itemName),1),e("td",null,s(t.remitaRevenueReference),1),e("td",null,s(t.gifmisReferenceCode),1),e("td",null,s(t.price),1),e("td",null,s(t.taxType),1),e("td",null,[n(h,{to:"/edit-item/"+t.itemCode},{default:u(()=>[ce]),_:2},1032,["to"])])]))),128))])])])])):v("",!0),l.showsearch==!1?(a(),i("div",ne,[e("div",re,[l.role==="revenue-officer"?(a(),i("div",de,[n(h,{class:"btn btn-outline-success",to:"/create-items"},{default:u(()=>[he,ue]),_:1})])):v("",!0),e("div",{class:g(this.loaderDiv)},_e,2),e("div",{class:g(this.mainDiv)},[e("table",ve,[pe,e("tbody",null,[(a(!0),i(_,null,b(l.allitems,t=>(a(),i("tr",null,[e("td",null,s(t.itemCode),1),e("td",null,s(t.itemOrgCode),1),e("td",null,s(t.itemName),1),e("td",null,s(t.price),1),e("td",null,[n(h,{to:"/edit-item/"+t.itemOrgCode},{default:u(()=>[be]),_:2},1032,["to"])])]))),256))])])],2)])])):v("",!0)])])])]),ge])]),n(I)],64)}var we=x(D,[["render",fe]]);const Ce={__name:"SearchItemsView",setup(o){return(c,m)=>(a(),i("main",null,[n(y),n(we)]))}};export{Ce as default};
