import{H as N}from"./Header.47845ea9.js";import{_ as C,a as g,u as w,o as n,c as l,b as s,t as c,F as m,j as h,e as f,k as O,l as a,n as A,v as d,d as _,f as i,g as b,r as z}from"./index.e2874b00.js";const x={name:"setuporganization",data(){return{errors:[],message:[],allorg:[],org:{organisationCode:"",organisationName:"",parentOrganizationCode:"",officeAddress:"",emailAddress:"",website:"",phoneNumber:""},suborg:{subOrganisationCode:"",subOrganisationName:"",organisationCode:""},emailAddress:"",subOrganisationCode:"",organizationCode:"",unit:"",firstName:"",lastName:"",middleName:"",gender:"",password:"",role:"",allroles:[],customerDetails:{emailAddress:"",subOrganisationCode:"",organizationCode:"",firstName:"",lastName:"",middleName:"",gender:"",unit:""}}},validations(){return{password:{required},confirmPassword:{required,sameAsPassword:sameAs(this.password)}}},async mounted(){this.role=localStorage.getItem("role");const r=await g.get("api/Users/profile",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.customerDetails=r.data.result;const o=await g.get("api/roles/allroles",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allroles=o.data.result;const u=await g.get("api/Organisation/organizations",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allorg=u.data.result},methods:{async handleOrg(){this.errors=[],this.message=[];const r=w();if(this.org.parentOrganizationCode||r.error("Parent Organization required."),this.org.organisationCode||r.error("Organization Code required."),this.org.organisationName||r.error("Organization Name required."),this.org.emailAddress||r.error("Organization Email Address required."),this.org.phoneNumber||r.error("Mobile Number required."),this.org.website||r.error("Website required."),this.org.officeAddress||r.error("Office Address required."),this.firstName||r.error("Firstname required."),this.lastName||r.error("Lastname required."),!this.emailAddress)r.error("Administrator Email Address required.");else{const o=await g.post("api/Organisation/addorganization",{organisationCode:this.org.organisationCode,organisationName:this.org.organisationName,parentOrganizationCode:this.org.parentOrganizationCode,officeAddress:this.org.officeAddress,emailAddress:this.org.emailAddress,website:this.org.website,phoneNumber:this.org.phoneNumber},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});await g.post("api/SubOrganisation/addsuborganization",{subOrganisationCode:"SUB"+this.org.organisationCode,subOrganisationName:"SUB "+this.org.organisationName,organisationCode:this.org.organisationCode},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),await g.post("api/Users/adduser",{emailAddress:this.emailAddress,subOrganisationCode:"SUB"+this.org.organisationCode,organizationCode:this.org.organisationCode,unit:this.unit,firstName:this.firstName,lastName:this.lastName,middleName:this.middleName,gender:this.gender,password:"password1",role:"org-admin"},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),o?(r.success(o.data.message),this.org.organisationCode="",this.org.organisationName="",this.org.parentOrganizationCode="",this.org.officeAddress="",this.org.emailAddress="",this.org.website="",this.org.phoneNumber="",this.suborg.subOrganisationCode="",this.suborg.subOrganisationName="",this.suborg.organisationCode="",this.emailAddress="",this.organizationCode="",this.subOrganisationCode="",this.firstName="",this.lastName="",this.password="",this.confirmPassword="",this.role=""):r.error("Incorrect Parameter")}}}},y={id:"layout-wrapper"},S={class:"main-content"},V={class:"page-content"},U={class:"container-fluid"},k={class:"row"},B={class:"col-12"},q={class:"page-title-box d-flex align-items-center justify-content-between"},I={class:"mb-0"},D=i("Create Organization "),P=s("br",null,null,-1),E=i(),M={style:{"font-size":"14px","font-weight":"500"}},F=i(),j={style:{"font-size":"14px","font-weight":"500"}},H=b('<div class="page-title-right"><ol class="breadcrumb m-0"><li class="breadcrumb-item"><a href="javascript: void(0);">Home</a></li><li class="breadcrumb-item active">Create Organization</li></ol></div>',1),L={class:"row"},T={class:"col-lg-12"},W={class:"card"},G={class:"card-body"},J=s("h4",{class:"card-title"},"Organization Information",-1),K={key:0,class:"alert alert-danger"},Q={key:1,class:"alert alert-success"},R={class:"row mt-4"},X={class:"col-md-4"},Y={class:"form-group"},Z=s("label",{class:"control-label"},[i("Parent Organization "),s("span",{class:"text-danger"},"*")],-1),$=["value"],ss={class:"col-md-4"},es={class:"form-group"},os=s("label",{class:"control-label"},[i("Organization Code "),s("span",{class:"text-danger"},"*")],-1),ts={class:"col-md-4"},rs={class:"form-group"},is=s("label",{class:"control-label"},[i("Organization Name "),s("span",{class:"text-danger"},"*")],-1),as={class:"col-md-4"},ns={class:"form-group"},ls=s("label",{class:"control-label"},[i("Email Address "),s("span",{class:"text-danger"},"*")],-1),ds={class:"col-md-4"},cs={class:"form-group"},gs=s("label",{class:"control-label"},[i("Mobile Number "),s("span",{class:"text-danger"},"*")],-1),ms={class:"col-md-4"},us={class:"form-group"},hs=s("label",{class:"control-label"},[i("Website "),s("span",{class:"text-danger"},"*")],-1),_s={class:"row"},ps={class:"col-md-4"},fs={class:"form-group"},bs=s("label",{class:"control-label"},[i("Address "),s("span",{class:"text-danger"},"*")],-1),vs=s("hr",null,null,-1),Ns=s("div",{class:"mt-5 mb-4"},[s("h4",{class:"card-title"},"Organization Administrator Information")],-1),Cs={class:"row"},ws={class:"col-md-4"},Os={class:"form-group"},As=s("label",{class:"control-label"},[i("First Name "),s("span",{class:"text-danger"},"*")],-1),zs={class:"col-md-4"},xs={class:"form-group"},ys=s("label",{class:"control-label"},[i("Last Name "),s("span",{class:"text-danger"},"*")],-1),Ss={class:"col-md-4"},Vs={class:"form-group"},Us=s("label",{class:"control-label"},[i("Email Address "),s("span",{class:"text-danger"},"*")],-1),ks=s("button",{class:"btn btn-outline-success mt-4 float-left"},"Create",-1),Bs=b('<footer class="footer"><div class="container-fluid"><div class="row"><div class="col-sm-6"> BackOffice 0.1 \xA9 2022 </div><div class="col-sm-6"><div class="text-sm-right d-none d-sm-block"> Powered by Intelligence </div></div></div></div></footer>',1);function qs(r,o,u,Ds,e,p){const v=z("router-view");return n(),l(m,null,[s("div",y,[s("div",S,[s("div",V,[s("div",U,[s("div",k,[s("div",B,[s("div",q,[s("h4",I,[D,P,E,s("span",M,c(e.customerDetails.organizationCode)+" // "+c(e.customerDetails.subOrganisationCode)+" //",1),F,s("span",j,c(e.customerDetails.lastName)+" "+c(e.customerDetails.firstName)+" // "+c(this.role),1)]),H])])]),s("div",L,[s("div",T,[s("div",W,[s("div",G,[J,e.errors.length?(n(),l("div",K,[(n(!0),l(m,null,h(e.errors,t=>(n(),l("span",null,c(t),1))),256))])):f("",!0),e.message.length?(n(),l("div",Q,[(n(!0),l(m,null,h(e.message,t=>(n(),l("strong",null,c(t),1))),256))])):f("",!0),s("form",{onSubmit:o[10]||(o[10]=O((...t)=>p.handleOrg&&p.handleOrg(...t),["prevent"]))},[s("div",R,[s("div",X,[s("div",Y,[Z,a(s("select",{"onUpdate:modelValue":o[0]||(o[0]=t=>e.org.parentOrganizationCode=t),class:"form-control"},[(n(!0),l(m,null,h(e.allorg,t=>(n(),l("option",{value:t.organisationCode},c(t.organisationCode),9,$))),256))],512),[[A,e.org.parentOrganizationCode]])])]),s("div",ss,[s("div",es,[os,a(s("input",{class:"form-control",type:"text","onUpdate:modelValue":o[1]||(o[1]=t=>e.org.organisationCode=t)},null,512),[[d,e.org.organisationCode]])])]),s("div",ts,[s("div",rs,[is,a(s("input",{class:"form-control",type:"text","onUpdate:modelValue":o[2]||(o[2]=t=>e.org.organisationName=t)},null,512),[[d,e.org.organisationName]])])]),s("div",as,[s("div",ns,[ls,a(s("input",{class:"form-control",type:"text","onUpdate:modelValue":o[3]||(o[3]=t=>e.org.emailAddress=t)},null,512),[[d,e.org.emailAddress]])])]),s("div",ds,[s("div",cs,[gs,a(s("input",{class:"form-control",type:"text","onUpdate:modelValue":o[4]||(o[4]=t=>e.org.phoneNumber=t)},null,512),[[d,e.org.phoneNumber]])])]),s("div",ms,[s("div",us,[hs,a(s("input",{class:"form-control",type:"text","onUpdate:modelValue":o[5]||(o[5]=t=>e.org.website=t)},null,512),[[d,e.org.website]])])])]),s("div",_s,[s("div",ps,[s("div",fs,[bs,a(s("textarea",{class:"form-control","onUpdate:modelValue":o[6]||(o[6]=t=>e.org.officeAddress=t),cols:"30",rows:"5"},null,512),[[d,e.org.officeAddress]])])])]),vs,Ns,s("div",Cs,[s("div",ws,[s("div",Os,[As,a(s("input",{class:"form-control",type:"text","onUpdate:modelValue":o[7]||(o[7]=t=>e.firstName=t)},null,512),[[d,e.firstName]])])]),s("div",zs,[s("div",xs,[ys,a(s("input",{class:"form-control",type:"text","onUpdate:modelValue":o[8]||(o[8]=t=>e.lastName=t)},null,512),[[d,e.lastName]])])]),s("div",Ss,[s("div",Vs,[Us,a(s("input",{class:"form-control",type:"text","onUpdate:modelValue":o[9]||(o[9]=t=>e.emailAddress=t)},null,512),[[d,e.emailAddress]])])])]),ks],32)])])])])])]),Bs])]),_(v)],64)}var Is=C(x,[["render",qs]]);const Ms={__name:"SetupOrgView",setup(r){return(o,u)=>(n(),l("main",null,[_(N),_(Is)]))}};export{Ms as default};
