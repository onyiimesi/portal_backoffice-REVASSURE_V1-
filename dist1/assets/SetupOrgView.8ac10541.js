import{H as N}from"./Header.61007050.js";import{_ as C,a as g,u as O,o as n,c as l,b as s,t as c,F as m,k as u,e as f,l as w,n as a,q as z,v as d,d as _,f as i,h as b,r as A}from"./index.a5d27921.js";const x={name:"setuporganization",data(){return{errors:[],message:[],allorg:[],org:{organisationCode:"",organisationName:"",parentOrganizationCode:"",officeAddress:"",emailAddress:"",website:"",phoneNumber:""},suborg:{subOrganisationCode:"",subOrganisationName:"",organisationCode:""},emailAddress:"",subOrganisationCode:"",organizationCode:"",unit:"",firstName:"",lastName:"",middleName:"",gender:"",password:"",role:"",allroles:[],customerDetails:{emailAddress:"",subOrganisationCode:"",organizationCode:"",firstName:"",lastName:"",middleName:"",gender:"",unit:""},roles:"0",roless:"portal-admin"}},validations(){return{password:{required},confirmPassword:{required,sameAsPassword:sameAs(this.password)}}},async mounted(){this.role=localStorage.getItem("role"),this.roles!=this.role&&this.roless!=this.role&&(localStorage.removeItem("token"),this.$router.push("/"));const r=await g.get("api/Users/profile",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.customerDetails=r.data.result;const e=await g.get("api/roles/allroles",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allroles=e.data.result;const h=await g.get("api/Organisation/organizations",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allorg=h.data.result},methods:{async handleOrg(){this.errors=[],this.message=[];const r=O();this.org.parentOrganizationCode||r.error("Parent Organization required."),this.org.organisationCode||r.error("Organization Code required."),this.org.organisationName||r.error("Organization Name required."),this.org.emailAddress||r.error("Organization Email Address required."),this.org.phoneNumber||r.error("Mobile Number required."),this.org.website||r.error("Website required."),this.org.officeAddress||r.error("Office Address required."),this.firstName||r.error("Firstname required."),this.lastName?(await g.post("api/Users/adduser",{emailAddress:this.emailAddress,subOrganisationCode:"SUB"+this.org.organisationCode,organizationCode:this.org.organisationCode,unit:this.unit,firstName:this.firstName,lastName:this.lastName,middleName:this.middleName,gender:this.gender,password:"password1",role:"org-admin"},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(e=>{}).catch(e=>{this.eee=e.response.data.errors,r.error(this.eee.EmailAddress[0]),r.error(this.eee.FirstName[0]),r.error(this.eee.LastName[0]),r.error(this.eee.OrganizationCode[0])}),await g.post("api/SubOrganisation/addsuborganization",{subOrganisationCode:"SUB"+this.org.organisationCode,subOrganisationName:"SUB "+this.org.organisationName,organisationCode:this.org.organisationCode},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(e=>{}).catch(e=>{this.eee=e.response.data.errors,r.error(this.eee.OrganizationCode[0])}),await g.post("api/Organisation/addorganization",{organisationCode:this.org.organisationCode,organisationName:this.org.organisationName,parentOrganizationCode:this.org.parentOrganizationCode,officeAddress:this.org.officeAddress,emailAddress:this.org.emailAddress,website:this.org.website,phoneNumber:this.org.phoneNumber},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(e=>{r.success(e.data.message),this.$router.push("/list-organization"),this.org.organisationCode="",this.org.organisationName="",this.org.parentOrganizationCode="",this.org.officeAddress="",this.org.emailAddress="",this.org.website="",this.org.phoneNumber="",this.suborg.subOrganisationCode="",this.suborg.subOrganisationName="",this.suborg.organisationCode="",this.emailAddress="",this.organizationCode="",this.subOrganisationCode="",this.firstName="",this.lastName="",this.password="",this.confirmPassword="",this.role=""}).catch(e=>{this.eee=e.response.data.errors,r.error(this.eee.OrganisationCode[0]),r.error(this.eee.OrganisationName[0]),r.error(this.eee.ParentOrganizationCode[0])})):r.error("Lastname required.")}}},y={id:"layout-wrapper"},S={class:"main-content"},V={class:"page-content"},U={class:"container-fluid"},k={class:"row"},B={class:"col-12"},q={class:"page-title-box d-flex align-items-center justify-content-between"},I={class:"mb-0"},D=i("Create Organization "),P=s("br",null,null,-1),E=i(),F={style:{"font-size":"14px","font-weight":"500"}},M=i(),L={style:{"font-size":"14px","font-weight":"500"}},H=b('<div class="page-title-right"><ol class="breadcrumb m-0"><li class="breadcrumb-item"><a href="javascript: void(0);">Home</a></li><li class="breadcrumb-item active">Create Organization</li></ol></div>',1),T={class:"row"},j={class:"col-lg-12"},W={class:"card"},G={class:"card-body"},J=s("h4",{class:"card-title"},"Organization Information",-1),K={key:0,class:"alert alert-danger"},Q={key:1,class:"alert alert-success"},R={class:"row mt-4"},X={class:"col-md-4"},Y={class:"form-group"},Z=s("label",{class:"control-label"},[i("Parent Organization "),s("span",{class:"text-danger"},"*")],-1),$=["value"],ss={class:"col-md-4"},es={class:"form-group"},os=s("label",{class:"control-label"},[i("Organization Code "),s("span",{class:"text-danger"},"*")],-1),ts={class:"col-md-4"},rs={class:"form-group"},is=s("label",{class:"control-label"},[i("Organization Name "),s("span",{class:"text-danger"},"*")],-1),as={class:"col-md-4"},ns={class:"form-group"},ls=s("label",{class:"control-label"},[i("Email Address "),s("span",{class:"text-danger"},"*")],-1),ds={class:"col-md-4"},cs={class:"form-group"},gs=s("label",{class:"control-label"},[i("Mobile Number "),s("span",{class:"text-danger"},"*")],-1),ms={class:"col-md-4"},hs={class:"form-group"},us=s("label",{class:"control-label"},[i("Website "),s("span",{class:"text-danger"},"*")],-1),_s={class:"row"},ps={class:"col-md-4"},fs={class:"form-group"},bs=s("label",{class:"control-label"},[i("Address "),s("span",{class:"text-danger"},"*")],-1),vs=s("hr",null,null,-1),Ns=s("div",{class:"mt-5 mb-4"},[s("h4",{class:"card-title"},"Organization Administrator Information")],-1),Cs={class:"row"},Os={class:"col-md-4"},ws={class:"form-group"},zs=s("label",{class:"control-label"},[i("First Name "),s("span",{class:"text-danger"},"*")],-1),As={class:"col-md-4"},xs={class:"form-group"},ys=s("label",{class:"control-label"},[i("Last Name "),s("span",{class:"text-danger"},"*")],-1),Ss={class:"col-md-4"},Vs={class:"form-group"},Us=s("label",{class:"control-label"},[i("Email Address "),s("span",{class:"text-danger"},"*")],-1),ks=s("button",{class:"btn btn-outline-success mt-4 float-left mr-3"},"Create",-1),Bs=b('<footer class="footer"><div class="container-fluid"><div class="row"><div class="col-sm-6"> BackOffice 0.1 \xA9 2022 </div><div class="col-sm-6"><div class="text-sm-right d-none d-sm-block"> Powered by Intelligence </div></div></div></div></footer>',1);function qs(r,e,h,Ds,o,p){const v=A("router-view");return n(),l(m,null,[s("div",y,[s("div",S,[s("div",V,[s("div",U,[s("div",k,[s("div",B,[s("div",q,[s("h4",I,[D,P,E,s("span",F,c(o.customerDetails.organizationCode)+" // "+c(o.customerDetails.subOrganisationCode)+" //",1),M,s("span",L,c(o.customerDetails.lastName)+" "+c(o.customerDetails.firstName)+" // "+c(this.role),1)]),H])])]),s("div",T,[s("div",j,[s("div",W,[s("div",G,[J,o.errors.length?(n(),l("div",K,[(n(!0),l(m,null,u(o.errors,t=>(n(),l("span",null,c(t),1))),256))])):f("",!0),o.message.length?(n(),l("div",Q,[(n(!0),l(m,null,u(o.message,t=>(n(),l("strong",null,c(t),1))),256))])):f("",!0),s("form",{onSubmit:e[10]||(e[10]=w((...t)=>p.handleOrg&&p.handleOrg(...t),["prevent"]))},[s("div",R,[s("div",X,[s("div",Y,[Z,a(s("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.org.parentOrganizationCode=t),class:"form-control"},[(n(!0),l(m,null,u(o.allorg,t=>(n(),l("option",{value:t.organisationCode},c(t.organisationName),9,$))),256))],512),[[z,o.org.parentOrganizationCode]])])]),s("div",ss,[s("div",es,[os,a(s("input",{class:"form-control",type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>o.org.organisationCode=t)},null,512),[[d,o.org.organisationCode]])])]),s("div",ts,[s("div",rs,[is,a(s("input",{class:"form-control",type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>o.org.organisationName=t)},null,512),[[d,o.org.organisationName]])])]),s("div",as,[s("div",ns,[ls,a(s("input",{class:"form-control",type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>o.org.emailAddress=t)},null,512),[[d,o.org.emailAddress]])])]),s("div",ds,[s("div",cs,[gs,a(s("input",{class:"form-control",type:"text","onUpdate:modelValue":e[4]||(e[4]=t=>o.org.phoneNumber=t)},null,512),[[d,o.org.phoneNumber]])])]),s("div",ms,[s("div",hs,[us,a(s("input",{class:"form-control",type:"text","onUpdate:modelValue":e[5]||(e[5]=t=>o.org.website=t)},null,512),[[d,o.org.website]])])])]),s("div",_s,[s("div",ps,[s("div",fs,[bs,a(s("textarea",{class:"form-control","onUpdate:modelValue":e[6]||(e[6]=t=>o.org.officeAddress=t),cols:"30",rows:"5"},null,512),[[d,o.org.officeAddress]])])])]),vs,Ns,s("div",Cs,[s("div",Os,[s("div",ws,[zs,a(s("input",{class:"form-control",type:"text","onUpdate:modelValue":e[7]||(e[7]=t=>o.firstName=t)},null,512),[[d,o.firstName]])])]),s("div",As,[s("div",xs,[ys,a(s("input",{class:"form-control",type:"text","onUpdate:modelValue":e[8]||(e[8]=t=>o.lastName=t)},null,512),[[d,o.lastName]])])]),s("div",Ss,[s("div",Vs,[Us,a(s("input",{class:"form-control",type:"text","onUpdate:modelValue":e[9]||(e[9]=t=>o.emailAddress=t)},null,512),[[d,o.emailAddress]])])])]),ks],32)])])])])])]),Bs])]),_(v)],64)}var Is=C(x,[["render",qs]]);const Fs={__name:"SetupOrgView",setup(r){return(e,h)=>(n(),l("main",null,[_(N),_(Is)]))}};export{Fs as default};
