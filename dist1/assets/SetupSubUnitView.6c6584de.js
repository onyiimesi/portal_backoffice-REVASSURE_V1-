import{H as C}from"./Header.747f91be.js";import{_ as S,a as r,o as i,c as a,b as e,F as l,j as m,e as g,k as w,l as d,n as _,t as c,v,d as h,f as p,r as O}from"./index.06a914a2.js";const U={name:"subunitsetup",data(){return{errors:[],message:[],allsub:[],subOrganisationCode:"",unitName:"",unitCode:"",organisationCode:"",customerDetails:{emailAddress:"",subOrganisationCode:"",organizationCode:"",firstName:"",lastName:"",middleName:"",gender:"",unit:""}}},async mounted(){const n=await r.get("api/Users/profile",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.customerDetails=n.data.result;const t=await r.get("api/Item/organizations/"+this.customerDetails.organizationCode,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allitems=t.data.result},methods:{async onChange(n){const t=await r.get("api/SubOrganisation/suborganizations/"+n.target.value,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allsub=t.data.result},async handleSubUnit(){this.errors=[],this.message=[],this.subOrganisationCode||this.errors.push("Sub-Organisation Code required."),this.unitName||this.errors.push("Unit Name required."),this.unitCode||this.errors.push("Unit Code required."),this.organisationCode||this.errors.push("Organisation Code required.");const n=await r.post("api/Units/addunit",{subOrganisationCode:this.subOrganisationCode,unitName:this.unitName,unitCode:this.unitCode,organisationCode:this.organisationCode},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});n&&(this.message.push(n.data.message),this.subOrganisationCode="",this.unitName="",this.unitCode="",this.organisationCode="")}}},N={id:"layout-wrapper"},k={class:"main-content"},y={class:"page-content"},z={class:"container-fluid"},x=p('<div class="row"><div class="col-12"><div class="page-title-box d-flex align-items-center justify-content-between"><h4 class="mb-0">SubUnit Setup</h4><div class="page-title-right"><ol class="breadcrumb m-0"><li class="breadcrumb-item"><a href="javascript: void(0);">Back Office</a></li><li class="breadcrumb-item active">SubUnit Setup</li></ol></div></div></div></div>',1),B={class:"row"},V={class:"col-lg-12"},D={class:"card"},I={class:"card-body"},A={key:0,class:"alert alert-danger"},q=e("b",null,"Please correct the following error(s):",-1),j={key:1,class:"alert alert-success"},M={class:"row"},F={class:"col-md-12"},H={class:"form-group"},P=e("label",{class:"control-label"},"Organization Code",-1),E=["value"],L={class:"col-md-12"},T={class:"form-group"},G=e("label",{class:"control-label"},"Sub-Organization Code",-1),J=e("option",null,"Choose",-1),K=["value"],Q={class:"col-md-12"},R={class:"form-group"},W=e("label",{class:"control-label"},"Unit Name",-1),X={class:"col-md-12"},Y={class:"form-group"},Z=e("label",{class:"control-label"},"Unit Code",-1),$=e("button",{class:"btn btn-success float-left mr-4"},"Save",-1),ee=p('<footer class="footer"><div class="container-fluid"><div class="row"><div class="col-sm-6"> BackOffice 0.1 \xA9 2022 </div><div class="col-sm-6"><div class="text-sm-right d-none d-sm-block"> Powered by Intelligence </div></div></div></div></footer>',1);function se(n,t,b,oe,o,u){const f=O("router-view");return i(),a(l,null,[e("div",N,[e("div",k,[e("div",y,[e("div",z,[x,e("div",B,[e("div",V,[e("div",D,[e("div",I,[o.errors.length?(i(),a("div",A,[q,e("ul",null,[(i(!0),a(l,null,m(o.errors,s=>(i(),a("li",null,c(s),1))),256))])])):g("",!0),o.message.length?(i(),a("div",j,[(i(!0),a(l,null,m(o.message,s=>(i(),a("strong",null,c(s),1))),256))])):g("",!0),e("form",{onSubmit:t[5]||(t[5]=w((...s)=>u.handleSubUnit&&u.handleSubUnit(...s),["prevent"]))},[e("div",M,[e("div",F,[e("div",H,[P,d(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.organisationCode=s),onChange:t[1]||(t[1]=s=>u.onChange(s)),class:"form-control"},[e("option",{value:o.customerDetails.organizationCode},c(o.customerDetails.organizationCode),9,E)],544),[[_,o.organisationCode]])])]),e("div",L,[e("div",T,[G,d(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.subOrganisationCode=s),class:"form-control",id:""},[J,(i(!0),a(l,null,m(o.allsub,s=>(i(),a("option",{value:s.subOrganisationCode},c(s.subOrganisationCode),9,K))),256))],512),[[_,o.subOrganisationCode]])])]),e("div",Q,[e("div",R,[W,d(e("input",{class:"form-control",type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>o.unitName=s)},null,512),[[v,o.unitName]])])]),e("div",X,[e("div",Y,[Z,d(e("input",{class:"form-control",type:"text","onUpdate:modelValue":t[4]||(t[4]=s=>o.unitCode=s)},null,512),[[v,o.unitCode]])])])]),$],32)])])])])])]),ee])]),h(f)],64)}var te=S(U,[["render",se]]);const ne={__name:"SetupSubUnitView",setup(n){return(t,b)=>(i(),a("main",null,[h(C),h(te)]))}};export{ne as default};
