import{H as k}from"./Header.61007050.js";import{_ as I,a as d,u as D,o as a,c as r,b as o,t as i,l as y,n,v as p,q as v,F as c,k as h,d as m,w as x,f as C,h as w,r as g}from"./index.a5d27921.js";const S={name:"setupworkflow",data(){return{errors:[],message:[],actions:[],moduleactions:[],workflow:[],action:"",module:"",description:"",customerDetails:{id:"",emailAddress:"",subOrganisationCode:"",organizationCode:"",firstName:"",lastName:"",middleName:"",gender:""},role:""}},async mounted(){this.role=localStorage.getItem("role");const l=await d.get("api/Users/profile",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.customerDetails=l.data.result;const e=await d.get("api/Modules/modules",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.actions=e.data.result;const u=await d.get("api/WorkFlowItem/Items/"+this.customerDetails.organizationCode,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.workflow=u.data.result},methods:{async getActions(l){const e=await d.get("api/ModuleAction/getactions/"+l.target.value,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.moduleactions=e.data.result},async setupWorkflow(){const l=D();if(this.action||l.error("Item required."),!this.description)l.error("Description required.");else{const e=await d.post("api/WorkFlowItem/AddItem",{action:this.action,module:this.module,organizationCode:this.customerDetails.organizationCode,description:this.description},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});e?(l.success(e.data.message),this.action="",this.module="",this.description=""):l.error("Incorrect Parameter")}}}},A={id:"layout-wrapper"},z={class:"main-content"},F={class:"page-content"},N={class:"container-fluid"},V={class:"row"},B={class:"col-12"},W={class:"page-title-box d-flex align-items-center justify-content-between"},M={class:"mb-0"},L=C("Setup Workflow, "),U={style:{"font-size":"14px","font-weight":"500"}},q=w('<div class="page-title-right"><ol class="breadcrumb m-0"><li class="breadcrumb-item"><a href="javascript: void(0);">Back Office</a></li><li class="breadcrumb-item active">Setup Workflow</li></ol></div>',1),O={class:"row"},T={class:"col-lg-6"},j={class:"card"},E={class:"card-body"},H={class:"form-group"},P={class:"row"},G={class:"col-md-12"},J={class:"form-group"},K=o("label",{class:"control-label"},"Module",-1),Q=["value"],R={class:"col-md-12"},X={class:"form-group"},Y=o("label",{class:"control-label"},"Item",-1),Z=["value"],$={class:"col-md-12"},oo={class:"form-group"},to=o("label",{class:"control-label"},"Description",-1),eo=o("div",{class:"row"},[o("div",{class:"col-md-12"},[o("div",{class:"form-group"},[o("button",{class:"btn btn-success mr-4"},"Create")])])],-1),so={class:"col-lg-6"},lo={class:"card"},io={class:"card-body table-responsive"},ao={id:"datatable",class:"table table-bordered dt-responsive nowrap",style:{"border-collapse":"collapse","border-spacing":"0",width:"100%"}},ro=o("thead",null,[o("tr",null,[o("th",null,"Item"),o("th",null,"Description"),o("th",null,"Action")])],-1),no=["data-target"],co=["id"],mo={class:"modal-dialog modal-dialog-centered"},uo={class:"modal-content"},_o=o("div",{class:"modal-header"},[o("h5",{id:"myLargeModalLabel",class:"modal-title mt-0"},"View Workflow"),o("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[o("span",{"aria-hidden":"true"},"\xD7")])],-1),ho={class:"modal-body"},po={class:"row"},vo={class:"col-md-6 mb-4"},go={class:"form-group"},wo=o("label",{class:"control-label"},"Item",-1),bo={class:"col-md-6 mb-4"},fo={class:"form-group"},ko=o("label",{class:"control-label"},"Description",-1),Io=o("hr",null,null,-1),Do=o("button",{class:"btn btn-success","data-dismiss":"modal"},"Edit",-1),yo=w('<footer class="footer"><div class="container-fluid"><div class="row"><div class="col-sm-6"> BackOffice 0.1 \xA9 2022 </div><div class="col-sm-6"><div class="text-sm-right d-none d-sm-block"> Powered by Intelligence </div></div></div></div></footer>',1);function xo(l,e,u,So,s,_){const b=g("router-link"),f=g("router-view");return a(),r(c,null,[o("div",A,[o("div",z,[o("div",F,[o("div",N,[o("div",V,[o("div",B,[o("div",W,[o("h4",M,[L,o("span",U,i(s.customerDetails.lastName)+" "+i(s.customerDetails.firstName)+" - "+i(this.role),1)]),q])])]),o("div",O,[o("div",T,[o("div",j,[o("div",E,[o("form",{onSubmit:e[5]||(e[5]=y((...t)=>_.setupWorkflow&&_.setupWorkflow(...t),["prevent"]))},[o("div",H,[n(o("input",{class:"form-control",type:"hidden","onUpdate:modelValue":e[0]||(e[0]=t=>s.customerDetails.organizationCode=t)},null,512),[[p,s.customerDetails.organizationCode]])]),o("div",P,[o("div",G,[o("div",J,[K,n(o("select",{onChange:e[1]||(e[1]=t=>_.getActions(t)),"onUpdate:modelValue":e[2]||(e[2]=t=>s.module=t),class:"form-control select2"},[(a(!0),r(c,null,h(s.actions,t=>(a(),r("option",{value:t.modCode},i(t.modName),9,Q))),256))],544),[[v,s.module]])])]),o("div",R,[o("div",X,[Y,n(o("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>s.action=t),class:"form-control select2"},[(a(!0),r(c,null,h(s.moduleactions,t=>(a(),r("option",{value:t.actionCode},i(t.actionName),9,Z))),256))],512),[[v,s.action]])])]),o("div",$,[o("div",oo,[to,n(o("textarea",{"onUpdate:modelValue":e[4]||(e[4]=t=>s.description=t),class:"form-control",id:"",cols:"30",rows:"10"},null,512),[[p,s.description]])])])]),eo],32)])])]),o("div",so,[o("div",lo,[o("div",io,[o("table",ao,[ro,o("tbody",null,[(a(!0),r(c,null,h(s.workflow,t=>(a(),r("tr",null,[o("td",null,i(t.workFlowItemAction),1),o("td",null,i(t.workFlowItemDescription),1),o("td",null,[o("button",{class:"btn btn-success mr-2","data-toggle":"modal","data-target":"#bs-example-modal-lg-"+t.workFlowItemID},"View",8,no)]),o("div",{class:"modal fade",id:"bs-example-modal-lg-"+t.workFlowItemID,tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"},[o("div",mo,[o("div",uo,[_o,o("div",ho,[o("div",po,[o("div",vo,[o("div",go,[wo,o("h5",null,i(t.workFlowItemAction),1)])]),o("div",bo,[o("div",fo,[ko,o("h5",null,i(t.workFlowItemDescription),1)])])]),Io,m(b,{to:"/edit-workflow/"+t.workFlowItemID},{default:x(()=>[Do]),_:2},1032,["to"])])])])],8,co)]))),256))])])])])])])])]),yo])]),m(f)],64)}var Co=I(S,[["render",xo]]);const Fo={__name:"SetupWorkflowView",setup(l){return(e,u)=>(a(),r("main",null,[m(k),m(Co)]))}};export{Fo as default};
