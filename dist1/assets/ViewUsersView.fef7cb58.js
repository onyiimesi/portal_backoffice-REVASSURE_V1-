import{H as y}from"./Header.61007050.js";import{_ as N,a as n,o as a,c as i,b as s,t as e,d as r,w as v,e as h,F as _,k as m,s as p,f as c,h as g,r as b}from"./index.a5d27921.js";const k={name:"viewbanks",data(){return{name:"",allusers:[],role:"",customerDetails:{emailAddress:"",subOrganisationCode:"",organizationCode:"",firstName:"",lastName:"",middleName:"",gender:"",unit:""},search:"",showsearch:!1,caris:[],loaderDiv:"",mainDiv:"d-none",roles:"org-admin"}},async mounted(){this.role=localStorage.getItem("role"),this.roles!=this.role&&(localStorage.removeItem("token"),this.$router.push("/"));const l=await n.get("api/Users/profile",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.customerDetails=l.data.result;const d=await n.get("api/Users/orgusers/"+this.customerDetails.organizationCode,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allusers=d.data.result,this.loaderDiv="d-none",this.mainDiv="",setTimeout(()=>{$("#datatable").DataTable({lengthMenu:[[5,10,25,50,-1],[5,10,25,50,"All"]],pageLength:25,retrieve:!0})})},methods:{async searchUser(){await n.get("api/Users/search?searchstring="+this.search,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(l=>{this.caris=l.data.result,this.search="",this.showsearch=!0}).catch(l=>{console.log(l)})}}},D={id:"layout-wrapper"},x={class:"main-content"},C={class:"page-content"},U={class:"container-fluid"},V={class:"row"},z={class:"col-12"},A={class:"page-title-box d-flex align-items-center justify-content-between"},B={class:"mb-0"},S=c("View Users "),I=s("br",null,null,-1),F=c(),L={style:{"font-size":"14px","font-weight":"500"}},E=c(),H={style:{"font-size":"14px","font-weight":"500"}},O={class:"page-title-right"},T={class:"breadcrumb m-0"},j={class:"breadcrumb-item"},M=c("Home"),P=s("li",{class:"breadcrumb-item active"},"View Users",-1),q={class:"row"},G={class:"col-12"},J={key:0,class:"card"},K={class:"card-body table-responsive"},Q={id:"datatable",class:"table table-bordered dt-responsive nowrap",style:{"border-collapse":"collapse","border-spacing":"0",width:"100%"}},R=s("thead",null,[s("tr",null,[s("th",null,"First Name"),s("th",null,"Last Name"),s("th",null,"Email Address")])],-1),W={key:0,class:"text-center"},X=s("td",{colspan:"7"},[s("h3",{style:{color:"red"}},"User Not Found!")],-1),Y=[X],Z={key:1,class:"card"},ss={class:"card-body table-responsive"},es={class:"mb-4 text-right"},ts=s("i",{class:"fa fa-plus"},null,-1),os=c(" Create User"),as=g('<div class="ph-item"><div class="ph-col-12"><div class="ph-row"><div class="ph-col-4"></div><div class="ph-col-8 empty"></div><div class="ph-col-6"></div><div class="ph-col-6 empty"></div><div class="ph-col-12"></div><div class="ph-col-12"></div><div class="ph-col-12"></div><div class="ph-col-12"></div></div><div class="ph-row"><div class="ph-col-4"></div><div class="ph-col-8 empty"></div><div class="ph-col-6"></div><div class="ph-col-6 empty"></div><div class="ph-col-12"></div><div class="ph-col-12"></div><div class="ph-col-12"></div><div class="ph-col-12"></div></div></div></div>',1),is=[as],ls={id:"datatable",class:"table table-bordered dt-responsive nowrap",style:{"border-collapse":"collapse","border-spacing":"0",width:"100%"}},rs=s("thead",null,[s("tr",null,[s("th",null,"First Name"),s("th",null,"Last Name"),s("th",null,"Email Address")])],-1),cs=g('<footer class="footer"><div class="container-fluid"><div class="row"><div class="col-sm-6"> BackOffice 0.1 \xA9 2022 </div><div class="col-sm-6"><div class="text-sm-right d-none d-sm-block"> Powered by Intelligence </div></div></div></div></footer>',1);function ds(l,d,f,hs,t,_s){const u=b("router-link"),w=b("router-view");return a(),i(_,null,[s("div",D,[s("div",x,[s("div",C,[s("div",U,[s("div",V,[s("div",z,[s("div",A,[s("h4",B,[S,I,F,s("span",L,e(t.customerDetails.organizationCode)+" // "+e(t.customerDetails.subOrganisationCode)+" //",1),E,s("span",H,e(t.customerDetails.lastName)+" "+e(t.customerDetails.firstName)+" // "+e(this.role),1)]),s("div",O,[s("ol",T,[s("li",j,[r(u,{to:"/dashboard"},{default:v(()=>[M]),_:1})]),P])])])])]),s("div",q,[s("div",G,[t.showsearch==!0?(a(),i("div",J,[s("div",K,[s("table",Q,[R,s("tbody",null,[t.caris.length?h("",!0):(a(),i("tr",W,Y)),(a(!0),i(_,null,m(t.caris,o=>(a(),i("tr",{key:o.id},[s("td",null,e(o.firstName),1),s("td",null,e(o.lastName),1),s("td",null,e(o.emailAddress),1)]))),128))])])])])):h("",!0),t.showsearch==!1?(a(),i("div",Z,[s("div",ss,[s("div",es,[r(u,{class:"btn btn-outline-success",to:"/create-user"},{default:v(()=>[ts,os]),_:1})]),s("div",{class:p(this.loaderDiv)},is,2),s("div",{class:p(this.mainDiv)},[s("table",ls,[rs,s("tbody",null,[(a(!0),i(_,null,m(t.allusers,o=>(a(),i("tr",{key:o.id},[s("td",null,e(o.firstName),1),s("td",null,e(o.lastName),1),s("td",null,e(o.emailAddress),1)]))),128))])])],2)])])):h("",!0)])])])]),cs])]),r(w)],64)}var ns=N(k,[["render",ds]]);const ms={__name:"ViewUsersView",setup(l){return(d,f)=>(a(),i("main",null,[r(y),r(ns)]))}};export{ms as default};
